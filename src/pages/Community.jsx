// src/pages/Community.jsx
import { useState, useEffect } from 'react';
import { formatDistanceToNow } from 'date-fns';
import { ru } from 'date-fns/locale';

// Sample forum data based on Cisco community forums
const INITIAL_FORUM_DATA = {
  categories: [
    { 
      id: 'networking', 
      name: 'Сетевое оборудование',
      description: 'Обсуждение маршрутизаторов, коммутаторов и другого сетевого оборудования',
      topics: 345,
      posts: 1287
    },
    { 
      id: 'security', 
      name: 'Безопасность',
      description: 'Решения безопасности, файрволы, VPN и соответствующие продукты',
      topics: 189,
      posts: 720 
    },
    { 
      id: 'ucs', 
      name: 'Unified Computing',
      description: 'Unified Computing System (UCS), серверы и вычислительная инфраструктура',
      topics: 112,
      posts: 405
    },
    { 
      id: 'aci', 
      name: 'ACI и центры обработки данных',
      description: 'Application Centric Infrastructure и технологии центров обработки данных',
      topics: 98,
      posts: 376
    },
    { 
      id: 'wireless', 
      name: 'Беспроводные технологии',
      description: 'Беспроводные контроллеры, точки доступа и мобильные решения',
      topics: 156,
      posts: 612
    },
  ],
  threads: [
    {
      id: 1,
      categoryId: 'networking',
      title: 'Cisco 2960X зависает при обновлении',
      author: 'Алексей П.',
      date: '2025-02-15T14:32:00',
      views: 347,
      replies: 12,
      content: `У меня возникла проблема с коммутатором Cisco 2960X. При попытке обновления прошивки устройство зависает и не отвечает на команды. Пробовал различные версии прошивки, но результат одинаковый. Подскажите, как решить эту проблему?`,
      tags: ['коммутаторы', 'обновление', '2960X', 'зависание'],
      solved: true,
      likes: 8,
      comments: [
        {
          id: 101,
          author: 'Максим В.',
          date: '2025-02-15T15:10:00',
          content: 'Попробуйте сначала сделать сброс настроек и очистить загрузочную флеш-память.',
          likes: 2
        },
        {
          id: 102,
          author: 'Сергей О.',
          date: '2025-02-15T16:05:00',
          content: 'У нас была похожая проблема. Причина оказалась в недостаточном объеме памяти. Проверьте свободное место перед обновлением.',
          likes: 5
        },
        {
          id: 103,
          author: 'Артем К.',
          date: '2025-02-16T09:22:00',
          content: 'Судя по описанию, это может быть известный баг в определенных версиях прошивки. Проверьте в документации Cisco список совместимости и известные проблемы.',
          likes: 7
        }
      ]
    },
    {
      id: 2,
      categoryId: 'aci',
      title: 'Показатель Health Score в Cisco ACI не меняется',
      author: 'Ирина С.',
      date: '2025-03-01T10:15:00',
      views: 215,
      replies: 7,
      content: `После обновления инфраструктуры ACI до версии 5.2(3), показатель Health Score перестал обновляться и остается постоянным на уровне 100, несмотря на возникающие проблемы. Логи системы не показывают ошибок. Кто-нибудь сталкивался с подобной проблемой?`,
      tags: ['ACI', 'мониторинг', 'health score', 'обновление'],
      solved: false,
      likes: 5,
      comments: [
        {
          id: 201,
          author: 'Дмитрий Н.',
          date: '2025-03-01T11:40:00',
          content: 'Проверьте настройки мониторинга и статистики. Возможно, сбросились настройки сбора данных после обновления.',
          likes: 3
        },
        {
          id: 202,
          author: 'Михаил Г.',
          date: '2025-03-01T14:22:00',
          content: 'В новых версиях ACI изменились некоторые метрики. Попробуйте перенастроить политики сбора данных.',
          likes: 1
        }
      ]
    },
    {
      id: 3,
      categoryId: 'security',
      title: 'Firepower 4110 не открывается веб-интерфейс управления',
      author: 'Владимир Д.',
      date: '2025-03-10T09:27:00',
      views: 432,
      replies: 15,
      content: `После перезагрузки Firepower 4110 не могу получить доступ к веб-интерфейсу управления. SSH работает нормально, но при попытке подключения по HTTPS браузер выдает ошибку подключения. Что может быть причиной и как это исправить?`,
      tags: ['firepower', '4110', 'веб-интерфейс', 'HTTPS'],
      solved: true,
      likes: 12,
      comments: [
        {
          id: 301,
          author: 'Елена В.',
          date: '2025-03-10T10:05:00',
          content: 'Проверьте настройки TLS и сертификатов. Возможно, истек срок действия сертификата после перезагрузки.',
          likes: 8
        },
        {
          id: 302,
          author: 'Андрей П.',
          date: '2025-03-10T11:30:00',
          content: 'Попробуйте сбросить настройки управления через SSH командой: "configure manager local"',
          likes: 6
        },
        {
          id: 303,
          author: 'Максим К.',
          date: '2025-03-10T14:15:00',
          content: 'Проверьте, что служба HTTPS запущена и указаны правильные порты. Иногда после обновлений сбрасываются настройки доступа.',
          likes: 10
        }
      ]
    },
    {
      id: 4,
      categoryId: 'wireless',
      title: 'Cisco AIR-AP1852i не подключается к контроллеру WLC',
      author: 'Наталья Р.',
      date: '2025-02-28T16:40:00',
      views: 187,
      replies: 8,
      content: `Установили новые точки доступа Cisco AIR-AP1852i, но они не подключаются к контроллеру WLC. В логах видно, что точки получают IP-адреса, но не проходят авторизацию. Контроллер - Cisco 5508. Есть идеи, как решить проблему?`,
      tags: ['беспроводные сети', 'AP1852i', 'WLC', 'авторизация'],
      solved: false,
      likes: 4,
      comments: [
        {
          id: 401,
          author: 'Сергей К.',
          date: '2025-02-28T17:15:00',
          content: 'Проверьте версии прошивок. Точки 1852i требуют определенной минимальной версии на контроллере 5508.',
          likes: 2
        },
        {
          id: 402,
          author: 'Александр М.',
          date: '2025-02-28T18:30:00',
          content: 'Проблема может быть в настройках безопасности. Проверьте настройки авторизации AP на контроллере и наличие сертификатов.',
          likes: 3
        }
      ]
    },
    {
      id: 5,
      categoryId: 'ucs',
      title: 'Проблема с загрузкой голосовой почты CUE на UC520',
      author: 'Денис Л.',
      date: '2025-03-05T11:20:00',
      views: 156,
      replies: 6,
      content: `После сбоя питания система голосовой почты CUE на маршрутизаторе UC520 не загружается. Система выдает ошибку при инициализации модуля. Пытался сбросить настройки, но это не помогло. Как можно восстановить работу голосовой почты?`,
      tags: ['UC520', 'CUE', 'голосовая почта', 'сбой'],
      solved: true,
      likes: 7,
      comments: [
        {
          id: 501,
          author: 'Олег В.',
          date: '2025-03-05T12:45:00',
          content: 'Возможно, повреждена файловая система. Попробуйте выполнить команду "show tech-support"',
          likes: 1
        },
        {
          id: 502,
          author: 'Евгений С.',
          date: '2025-03-05T14:30:00',
          content: 'В таких случаях часто помогает переинициализация модуля CUE. Используйте команду "service-module service-engine 1/0 reload"',
          likes: 5
        },
        {
          id: 503,
          author: 'Алексей М.',
          date: '2025-03-06T09:15:00',
          content: 'Если не помогает переинициализация, то возможно повреждение образа. Попробуйте восстановить через TFTP.',
          likes: 6
        }
      ]
    },
// Additional forum threads data to add to your INITIAL_FORUM_DATA object in Community.jsx
// Add these to the 'threads' array in your existing data

// Additional threads for networking category
{
  id: 6,
  categoryId: 'networking',
  title: 'Ошибка Stack Master на Cisco 3850',
  author: 'Игорь М.',
  date: '2025-02-10T08:45:00',
  views: 245,
  replies: 5,
  content: `После обновления стека коммутаторов Cisco 3850 до IOS 16.9.4, один из коммутаторов перестал быть мастером стека и выдает ошибку "Stack Port 1 invalid neighbor". Кто-нибудь сталкивался с такой проблемой?`,
  tags: ['3850', 'стек', 'IOS 16.9.4', 'stack master'],
  solved: true,
  likes: 9,
  comments: [
    {
      id: 601,
      author: 'Андрей К.',
      date: '2025-02-10T09:30:00',
      content: 'Проверьте физическое соединение стековых кабелей. Возможно, после обновления сбросились настройки стековых портов.',
      likes: 3
    },
    {
      id: 602,
      author: 'Петр С.',
      date: '2025-02-10T10:15:00',
      content: 'Эта ошибка обычно указывает на проблему с кабелем или портом. Попробуйте заменить стековый кабель.',
      likes: 7
    },
    {
      id: 603,
      author: 'Мария В.',
      date: '2025-02-10T12:40:00',
      content: 'У нас была похожая проблема после обновления. Помогла полная перезагрузка всего стека с отключением питания. После этого переизбрался мастер и всё заработало.',
      likes: 5
    }
  ]
},
{
  id: 7,
  categoryId: 'networking',
  title: 'Ошибка MTU при настройке OSPF на ISR 4431',
  author: 'Алексей Ф.',
  date: '2025-02-18T15:22:00',
  views: 189,
  replies: 4,
  content: `При настройке OSPF на маршрутизаторе ISR 4431 возникает ошибка MTU mismatch с соседними устройствами. Адъясенси формируется, но потом разрывается. В логах видно сообщение "OSPF-5-ADJCHG: Process 1, Nbr 10.1.1.2 on GigabitEthernet0/0/1 from FULL to DOWN, Reason: MTU mismatch". Как можно решить эту проблему?`,
  tags: ['ISR 4431', 'OSPF', 'MTU', 'adjacency'],
  solved: true,
  likes: 6,
  comments: [
    {
      id: 701,
      author: 'Сергей Н.',
      date: '2025-02-18T15:50:00',
      content: 'Проверьте значения MTU на обоих интерфейсах. Они должны совпадать. Используйте команду "show interface GigabitEthernet0/0/1" и сравните с соседним устройством.',
      likes: 4
    },
    {
      id: 702,
      author: 'Дмитрий П.',
      date: '2025-02-18T16:30:00',
      content: 'Попробуйте настроить MTU явно командой "ip mtu 1500" на интерфейсе GigabitEthernet0/0/1. Часто проблема в том, что на разных устройствах по умолчанию могут быть разные значения.',
      likes: 8
    }
  ]
},
{
  id: 8,
  categoryId: 'networking',
  title: 'VLAN не работает после обновления Catalyst 9300',
  author: 'Николай В.',
  date: '2025-03-05T10:18:00',
  views: 312,
  replies: 7,
  content: `После обновления коммутатора Catalyst 9300 до версии 17.3.3, некоторые VLAN перестали пропускать трафик. В конфигурации всё выглядит правильно, VLAN созданы, порты назначены, но трафик не проходит. Traceroute показывает, что пакеты останавливаются на коммутаторе. Что может быть причиной?`,
  tags: ['Catalyst 9300', 'VLAN', 'обновление', '17.3.3'],
  solved: false,
  likes: 11,
  comments: [
    {
      id: 801,
      author: 'Виктор М.',
      date: '2025-03-05T10:45:00',
      content: 'Проверьте состояние STP для этих VLAN. Возможно, порты блокируются протоколом STP. Используйте команду "show spanning-tree vlan X".',
      likes: 5
    },
    {
      id: 802,
      author: 'Антон К.',
      date: '2025-03-05T11:20:00',
      content: 'В версии 17.3.3 известна проблема с VLAN в определенных конфигурациях. Попробуйте пересоздать проблемные VLAN или обновиться до версии 17.3.4, где эта проблема исправлена.',
      likes: 9
    },
    {
      id: 803,
      author: 'Елена Д.',
      date: '2025-03-05T14:10:00',
      content: 'Проверьте также глобальные настройки VLAN Trunking Protocol (VTP). Иногда после обновления режим VTP может измениться, что влияет на распространение VLAN.',
      likes: 7
    }
  ]
},
{
  id: 9,
  categoryId: 'networking',
  title: 'Nexus 9000 - проблема с port-channel',
  author: 'Станислав Р.',
  date: '2025-03-12T09:30:00',
  views: 278,
  replies: 8,
  content: `Настроил port-channel на коммутаторе Nexus 9000 (LACP), но один из портов остается в состоянии "individual". В логах вижу сообщение "LACP-5-PORT_SUSPENDED: LACP protocol on port Ethernet1/20 suspended". Все настройки на портах идентичны. В чем может быть проблема?`,
  tags: ['Nexus 9000', 'port-channel', 'LACP', 'individual'],
  solved: true,
  likes: 14,
  comments: [
    {
      id: 901,
      author: 'Глеб П.',
      date: '2025-03-12T10:05:00',
      content: 'Проверьте скорость и дуплекс на проблемном порту. Все порты в port-channel должны иметь одинаковую скорость и режим дуплекса.',
      likes: 6
    },
    {
      id: 902,
      author: 'Марина С.',
      date: '2025-03-12T11:30:00',
      content: 'Убедитесь, что порт не находится в разных VLAN в режиме access. Для port-channel все порты должны быть либо в одном VLAN, либо все в режиме trunk с одинаковыми разрешенными VLAN.',
      likes: 11
    },
    {
      id: 903,
      author: 'Павел Ф.',
      date: '2025-03-12T13:45:00',
      content: 'Проверьте также настройки Flow Control и Storm Control. На Nexus 9000 эти параметры должны быть одинаковыми для всех портов в port-channel.',
      likes: 8
    }
  ]
},
{
  id: 10,
  categoryId: 'networking',
  title: 'ASR 9000 - проблема с маршрутизацией BGP',
  author: 'Олег Н.',
  date: '2025-02-22T14:15:00',
  views: 356,
  replies: 9,
  content: `На маршрутизаторе ASR 9000 перестали анонсироваться некоторые префиксы BGP после изменения конфигурации route-policy. В логах ошибок не видно, сессии BGP в состоянии established, но префиксы не анонсируются. Как диагностировать эту проблему?`,
  tags: ['ASR 9000', 'BGP', 'route-policy', 'prefix'],
  solved: true,
  likes: 21,
  comments: [
    {
      id: 1001,
      author: 'Артем С.',
      date: '2025-02-22T14:50:00',
      content: 'Проверьте детали route-policy командой "show route-policy name detail". Возможно, условия в политике не соответствуют префиксам, которые вы хотите анонсировать.',
      likes: 13
    },
    {
      id: 1002,
      author: 'Инна К.',
      date: '2025-02-22T15:30:00',
      content: 'Используйте команду "show bgp neighbors x.x.x.x advertised-routes" чтобы увидеть, какие маршруты анонсируются соседу. Это поможет понять, отфильтрованы ли префиксы политикой или есть другая проблема.',
      likes: 18
    },
    {
      id: 1003,
      author: 'Константин В.',
      date: '2025-02-22T16:45:00',
      content: 'Проверьте также наличие префиксов в RIB (таблице маршрутизации) командой "show route prefix/length". Если префиксов нет в RIB, то BGP не сможет их анонсировать, независимо от настроек route-policy.',
      likes: 15
    }
  ]
},

// Additional threads for security category
{
  id: 11,
  categoryId: 'security',
  title: 'ASA Firepower - проблема с SSL-инспекцией',
  author: 'Григорий Д.',
  date: '2025-02-05T11:20:00',
  views: 287,
  replies: 6,
  content: `Настроил SSL-инспекцию на ASA Firepower 2110, но некоторые сайты перестали открываться с ошибкой SSL. В логах вижу сообщение "SSL Flow failed, Error: unable to retrieve certificate". Какие могут быть причины и как это исправить?`,
  tags: ['ASA', 'Firepower', 'SSL', 'инспекция'],
  solved: true,
  likes: 16,
  comments: [
    {
      id: 1101,
      author: 'Евгений Т.',
      date: '2025-02-05T12:00:00',
      content: 'Проверьте, поддерживает ли ваша политика SSL-инспекции все современные шифры. Некоторые сайты используют новые TLS 1.3 шифры, которые могут быть не поддержаны в вашей конфигурации.',
      likes: 10
    },
    {
      id: 1102,
      author: 'Анна М.',
      date: '2025-02-05T13:40:00',
      content: 'Добавьте исключения для проблемных сайтов в политику SSL. Некоторые сайты используют certificate pinning и не будут работать с SSL-инспекцией.',
      likes: 14
    },
    {
      id: 1103,
      author: 'Денис К.',
      date: '2025-02-05T15:15:00',
      content: 'Убедитесь, что у вас правильно импортирован CA-сертификат в клиентские машины. Без доверенного CA клиенты будут получать ошибки SSL даже если инспекция работает корректно.',
      likes: 12
    }
  ]
},
{
  id: 12,
  categoryId: 'security',
  title: 'ISE 3.1 - проблема с аутентификацией 802.1X',
  author: 'Татьяна С.',
  date: '2025-03-08T09:45:00',
  views: 312,
  replies: 7,
  content: `После обновления Cisco ISE до версии 3.1, перестала работать аутентификация 802.1X для некоторых устройств. В логах ISE вижу ошибку "EAP-TLS handshake failed". Остальные методы аутентификации работают нормально. Что может быть причиной?`,
  tags: ['ISE', '802.1X', 'EAP-TLS', 'аутентификация'],
  solved: false,
  likes: 18,
  comments: [
    {
      id: 1201,
      author: 'Роман Н.',
      date: '2025-03-08T10:20:00',
      content: 'Проверьте срок действия сертификатов на ISE. После обновления до версии 3.1 часто возникают проблемы с сертификатами EAP.',
      likes: 9
    },
    {
      id: 1202,
      author: 'Светлана П.',
      date: '2025-03-08T11:15:00',
      content: 'Убедитесь, что в конфигурации ISE включена поддержка нужных шифров TLS. В версии 3.1 по умолчанию некоторые устаревшие шифры отключены из соображений безопасности.',
      likes: 15
    },
    {
      id: 1203,
      author: 'Вадим К.',
      date: '2025-03-08T13:30:00',
      content: 'Проверьте версию EAP на клиентских устройствах. ISE 3.1 требует определенных обновлений на стороне клиента для некоторых типов аутентификации.',
      likes: 11
    }
  ]
},
{
  id: 13,
  categoryId: 'security',
  title: 'FTD 7.0 - проблема с NAT и intra-interface трафиком',
  author: 'Борис Л.',
  date: '2025-03-20T13:10:00',
  views: 245,
  replies: 5,
  content: `Настроил NAT на Firepower Threat Defense 7.0, но трафик внутри одного интерфейса (hair-pinning) не работает. Конфигурация включает same-security-traffic permit intra-interface, но пакеты всё равно не проходят. Что я делаю не так?`,
  tags: ['FTD', 'NAT', 'intra-interface', 'hair-pinning'],
  solved: true,
  likes: 14,
  comments: [
    {
      id: 1301,
      author: 'Алиса К.',
      date: '2025-03-20T13:45:00',
      content: 'В FTD 7.0 необходимо также настроить правило NAT с опцией net-to-net для intra-interface трафика. Без этого опция same-security-traffic не работает корректно.',
      likes: 12
    },
    {
      id: 1302,
      author: 'Михаил Д.',
      date: '2025-03-20T14:30:00',
      content: 'Проверьте также политики доступа. В FTD требуется явно разрешить трафик между источником и назначением, даже если они находятся в одной зоне безопасности.',
      likes: 9
    },
    {
      id: 1303,
      author: 'Елена Г.',
      date: '2025-03-20T15:20:00',
      content: 'Используйте packet-tracer для диагностики: "packet-tracer input interface_name source_ip dest_ip protocol dest_port". Это покажет, на каком этапе обработки пакета возникает проблема.',
      likes: 16
    }
  ]
},

// Additional threads for aci category
{
  id: 14,
  categoryId: 'aci',
  title: 'ACI 5.2 - проблема с Multi-Pod',
  author: 'Андрей В.',
  date: '2025-02-28T10:30:00',
  views: 198,
  replies: 4,
  content: `После обновления ACI до версии 5.2, возникли проблемы с маршрутизацией между подами в Multi-Pod конфигурации. COOP-сессии активны, но маршруты не передаются между подами. В логах вижу ошибки "COOP-5-COLD_BOOT". Как можно решить эту проблему?`,
  tags: ['ACI', 'Multi-Pod', 'COOP', 'маршрутизация'],
  solved: true,
  likes: 13,
  comments: [
    {
      id: 1401,
      author: 'Марина Л.',
      date: '2025-02-28T11:15:00',
      content: 'Проверьте состояние IPN-соединений между подами. В версии 5.2 изменились требования к MTU для IPN, убедитесь, что MTU установлен не менее 9000 байт.',
      likes: 8
    },
    {
      id: 1402,
      author: 'Дмитрий С.',
      date: '2025-02-28T12:40:00',
      content: 'Ошибка "COOP-5-COLD_BOOT" часто указывает на проблемы с синхронизацией KEP (Key Exchange Policy). Попробуйте пересоздать KEP и перезагрузить spine-коммутаторы в обоих подах.',
      likes: 15
    },
    {
      id: 1403,
      author: 'Инна Ф.',
      date: '2025-02-28T14:20:00',
      content: 'Проверьте также конфигурацию L3Out в каждом поде. В ACI 5.2 изменилась обработка внешних маршрутов в Multi-Pod конфигурациях.',
      likes: 11
    }
  ]
},
{
  id: 15,
  categoryId: 'aci',
  title: 'ACI - проблема с интеграцией L4-L7 устройств',
  author: 'Виталий К.',
  date: '2025-03-15T16:20:00',
  views: 179,
  replies: 6,
  content: `При настройке Service Graph для F5 BIG-IP в ACI возникают ошибки развертывания конфигурации. В логах вижу сообщение "Device package communication failure". Устройство физически подключено и ping проходит. В чем может быть проблема?`,
  tags: ['ACI', 'Service Graph', 'F5', 'L4-L7'],
  solved: true,
  likes: 15,
  comments: [
    {
      id: 1501,
      author: 'Константин Р.',
      date: '2025-03-15T16:55:00',
      content: 'Проверьте версию Device Package для F5. Она должна соответствовать как версии ACI, так и версии F5 BIG-IP.',
      likes: 9
    },
    {
      id: 1502,
      author: 'Наталья С.',
      date: '2025-03-15T17:30:00',
      content: 'Убедитесь, что учетные данные в Device Manager в ACI соответствуют настройкам на F5. Также проверьте, что порты управления правильно настроены в L3Out.',
      likes: 12
    },
    {
      id: 1503,
      author: 'Олег В.',
      date: '2025-03-15T18:45:00',
      content: 'Проверьте также настройки SSL/TLS на устройстве F5. ACI может не поддерживать новые шифры, используемые в последних версиях F5.',
      likes: 8
    }
  ]
},

// Additional threads for wireless category
{
  id: 16,
  categoryId: 'wireless',
  title: 'Проблема роуминга клиентов между точками 9130AX',
  author: 'Ирина П.',
  date: '2025-02-14T14:20:00',
  views: 234,
  replies: 7,
  content: `После развертывания новых точек доступа Cisco 9130AX, клиенты не выполняют плавный роуминг между точками. Наблюдаются обрывы связи при перемещении. Контроллер WLC 9800, включены 802.11r и 802.11k. В чем может быть проблема?`,
  tags: ['9130AX', 'роуминг', '802.11r', 'WLC 9800'],
  solved: true,
  likes: 17,
  comments: [
    {
      id: 1601,
      author: 'Сергей М.',
      date: '2025-02-14T15:00:00',
      content: 'Проверьте настройки мощности передатчика на точках. Если мощность установлена слишком высокой, клиенты могут "держаться" за текущую точку доступа слишком долго, даже когда сигнал ухудшается.',
      likes: 13
    },
    {
      id: 1602,
      author: 'Анна Т.',
      date: '2025-02-14T16:15:00',
      content: 'Убедитесь, что на всех клиентских устройствах поддерживается 802.11r. Некоторые устаревшие устройства могут иметь проблемы с Fast Transition и требуют отключения этой функции.',
      likes: 9
    },
    {
      id: 1603,
      author: 'Павел Н.',
      date: '2025-02-14T17:30:00',
      content: 'Проверьте также настройки RRM. В WLC 9800 рекомендуется использовать DCA с включенным Channel Width Overlap. Это уменьшит интерференцию между каналами и улучшит роуминг.',
      likes: 15
    }
  ]
},
{
  id: 17,
  categoryId: 'wireless',
  title: 'WLC 9800 - проблема с гостевым доступом',
  author: 'Алексей И.',
  date: '2025-03-18T09:10:00',
  views: 276,
  replies: 5,
  content: `Настроил гостевой портал на WLC 9800 с использованием внутреннего web-auth. Клиенты подключаются к SSID, получают IP, но портал авторизации не открывается. В логах вижу ошибки "WEBAUTH-5-FAIL". Что может быть не так?`,
  tags: ['WLC 9800', 'гостевой доступ', 'web-auth', 'портал'],
  solved: false,
  likes: 12,
  comments: [
    {
      id: 1701,
      author: 'Дмитрий К.',
      date: '2025-03-18T09:45:00',
      content: 'Проверьте настройки ACL для гостевого WLAN. Необходимо разрешить трафик к DNS-серверам и к IP-адресу контроллера до аутентификации.',
      likes: 8
    },
    {
      id: 1702,
      author: 'Мария В.',
      date: '2025-03-18T10:30:00',
      content: 'Убедитесь, что виртуальный IP-адрес настроен на WLC и доступен из гостевой сети. Это необходимо для работы портала авторизации.',
      likes: 14
    },
    {
      id: 1703,
      author: 'Антон С.',
      date: '2025-03-18T11:50:00',
      content: 'Проверьте также настройки редиректа HTTP/HTTPS. В WLC 9800 требуется явно указать, какие порты должны перенаправляться на портал аутентификации.',
      likes: 10
    }
  ]
},

// Additional threads for ucs category
{
  id: 18,
  categoryId: 'ucs',
  title: 'UCS B200 M6 - проблема с загрузкой ESXi 7.0',
  author: 'Николай Д.',
  date: '2025-01-25T13:40:00',
  views: 312,
  replies: 8,
  content: `После установки новых блейд-серверов UCS B200 M6, возникли проблемы с загрузкой ESXi 7.0. Сервер начинает загрузку, но зависает на этапе инициализации драйверов хранилища. CIMC логи показывают ошибку "SCSI device not responding". Как решить эту проблему?`,
  tags: ['UCS', 'B200 M6', 'ESXi 7.0', 'загрузка'],
  solved: true,
  likes: 19,
  comments: [
    {
      id: 1801,
      author: 'Владимир С.',
      date: '2025-01-25T14:15:00',
      content: 'Проверьте версию прошивки HBA-контроллера. Для ESXi 7.0 на B200 M6 требуется минимум версия 4.2(2a).',
      likes: 14
    },
    {
      id: 1802,
      author: 'Евгения К.',
      date: '2025-01-25T15:30:00',
      content: 'Убедитесь, что в UCS Manager настроена правильная политика для Storage Adapter. В частности, проверьте настройки Queue Count и Ring Size.',
      likes: 11
    },
    {
      id: 1803,
      author: 'Михаил Т.',
      date: '2025-01-25T16:45:00',
      content: 'Попробуйте использовать образ ESXi с драйверами Cisco (Custom ISO). Стандартный образ VMware может не содержать необходимых драйверов для новых моделей серверов UCS.',
      likes: 18
    }
  ]
},
{
  id: 19,
  categoryId: 'ucs',
  title: 'UCS Manager - проблема с Service Profile',
  author: 'Галина Р.',
  date: '2025-03-02T11:20:00',
  views: 278,
  replies: 6,
  content: `При попытке применить Service Profile к серверу UCS C220 M6 через UCS Manager, процесс зависает на этапе "Applying Server Identity" и в итоге выдает ошибку "Service profile assignment failed". Сервер физически исправен и виден в инвентаре. Что может быть причиной?`,
  tags: ['UCS', 'Service Profile', 'C220 M6', 'UCS Manager'],
  solved: true,
  likes: 15,
  comments: [
    {
      id: 1901,
      author: 'Антон В.',
      date: '2025-03-02T12:00:00',
      content: 'Проверьте совместимость версии UCS Manager с серверами C220 M6. Для полной поддержки M6 требуется UCS Manager версии 4.2 или выше.',
      likes: 9
    },
    {
      id: 1902,
      author: 'Елена Н.',
      date: '2025-03-02T13:15:00',
      content: 'Проблема может быть в конфигурации CIMC на сервере. Попробуйте сбросить CIMC к заводским настройкам перед применением профиля.',
      likes: 12
    },
    {
      id: 1903,
      author: 'Сергей И.',
      date: '2025-03-02T14:50:00',
      content: 'Убедитесь также, что в Service Profile не используются incompatible policies. Например, некоторые Boot Policies не совместимы с определенными адаптерами на C220 M6.',
      likes: 14
    }
  ]
},
{
  id: 20,
  categoryId: 'ucs',
  title: 'UCS Intersight - проблема с HyperFlex развертыванием',
  author: 'Артем Ж.',
  date: '2025-03-21T10:30:00',
  views: 254,
  replies: 7,
  content: `При развертывании кластера HyperFlex через Intersight, процесс останавливается на этапе "Configure Network". В логах вижу ошибку "Unable to configure VLANs on Fabric Interconnects". Все необходимые VLAN созданы в Intersight. Что может быть причиной?`,
  tags: ['UCS', 'Intersight', 'HyperFlex', 'deployment'],
  solved: false,
  likes: 16,
  comments: [
    {
      id: 2001,
      author: 'Марина О.',
      date: '2025-03-21T11:15:00',
      content: 'Проверьте, что УЗ в Intersight имеет достаточные привилегии для настройки сети на Fabric Interconnects. Требуется как минимум роль "Server Administrator".',
      likes: 10
    },
    {
      id: 2002,
      author: 'Денис П.',
      date: '2025-03-21T12:40:00',
      content: 'Проблема может быть в Device Connector на Fabric Interconnects. Попробуйте переустановить и перенастроить Device Connector.',
      likes: 13
    },
    {
      id: 2003,
      author: 'Алексей К.',
      date: '2025-03-21T14:10:00',
      content: 'Убедитесь, что созданные VLAN не конфликтуют с существующими на FI. Если VLAN с такими ID уже существуют, но имеют другие имена, может возникать конфликт.',
      likes: 9
    }
  ]
},

// More networking threads
{
  id: 21,
  categoryId: 'networking',
  title: 'Проблема с BFD на маршрутизаторах ISR 4451',
  author: 'Игорь А.',
  date: '2025-02-27T15:40:00',
  views: 227,
  replies: 6,
  content: `После обновления IOS XE на маршрутизаторах ISR 4451 до версии 17.6.1, перестала работать BFD-сессия между ними. OSPF-соседство устанавливается, но BFD показывает состояние "Down". В логах вижу сообщение "BFD-6-BFD_SESS_DOWN: BFD session to neighbor x.x.x.x on interface GigabitEthernet0/0/1 has gone down. Reason: Detection timer expired". Что может быть причиной?`,
  tags: ['ISR 4451', 'BFD', 'IOS XE', 'OSPF'],
  solved: true,
  likes: 14,
  comments: [
    {
      id: 2101,
      author: 'Владимир Н.',
      date: '2025-02-27T16:20:00',
      content: 'В версии 17.6.1 изменились дефолтные таймеры BFD. Попробуйте явно настроить таймеры на обоих концах, например: "bfd interval 300 min_rx 300 multiplier 3".',
      likes: 11
    },
    {
      id: 2102,
      author: 'Елена С.',
      date: '2025-02-27T17:15:00',
      content: 'Проверьте также настройки CEF. В новых версиях IOS XE для корректной работы BFD требуется, чтобы CEF был включен на всех интерфейсах.',
      likes: 8
    },
    {
      id: 2103,
      author: 'Антон Г.',
      date: '2025-02-27T18:30:00',
      content: 'Убедитесь, что на обоих маршрутизаторах используется одинаковая версия IOS XE. Разные версии могут иметь несовместимые реализации BFD, особенно если одна из них старше 17.x.',
      likes: 15
    }
  ]
},
{
  id: 22,
  categoryId: 'networking',
  title: 'Cat9300 - проблема с PoE после стекирования',
  author: 'Наталья Б.',
  date: '2025-03-10T09:10:00',
  views: 268,
  replies: 8,
  content: `После стекирования коммутаторов Catalyst 9300, на одном из них перестал работать PoE на нескольких портах. В логах вижу сообщение "ILPOWER-5-POWER_DENIED". Настройки PoE на всех портах одинаковые. Бюджет питания не исчерпан. В чем может быть проблема?`,
  tags: ['Catalyst 9300', 'PoE', 'стек', 'питание'],
  solved: true,
  likes: 19,
  comments: [
    {
      id: 2201,
      author: 'Дмитрий В.',
      date: '2025-03-10T09:45:00',
      content: 'Проверьте настройки стека power stack. После стекирования может измениться распределение бюджета питания между коммутаторами.',
      likes: 13
    },
    {
      id: 2202,
      author: 'Ольга М.',
      date: '2025-03-10T10:30:00',
      content: 'На Cat9300 иногда возникает проблема с обнаружением устройств PoE после стекирования. Попробуйте выполнить команду "no power inline port shutdown" на проблемных портах.',
      likes: 16
    },
    {
      id: 2203,
      author: 'Сергей К.',
      date: '2025-03-10T11:50:00',
      content: 'Проверьте также приоритеты PoE на портах. В стеке Cat9300 порты с низким приоритетом могут терять питание, если общий бюджет питания стека уменьшается после объединения.',
      likes: 11
    }
  ]
},
{
  id: 23,
  categoryId: 'networking',
  title: 'ISR 1100 - проблема с Tunnel Protection',
  author: 'Олег С.',
  date: '2025-02-08T14:20:00',
  views: 215,
  replies: 5,
  content: `Настроил IPSec туннель на маршрутизаторе ISR 1100, но соединение не устанавливается. В логах вижу ошибку "CRYPTO-6-IKMP_NO_SA: IKE SA is not available for local=a.a.a.a remote=b.b.b.b". Конфигурация идентична рабочим туннелям на других маршрутизаторах. В чем может быть проблема?`,
  tags: ['ISR 1100', 'IPSec', 'Tunnel Protection', 'IKE'],
  solved: true,
  likes: 12,
  comments: [
    {
      id: 2301,
      author: 'Инна В.',
      date: '2025-02-08T15:00:00',
      content: 'На ISR 1100 есть ограничение по количеству одновременных IKE SA. Проверьте, сколько туннелей уже установлено. Может потребоваться освободить ресурсы или изменить таймеры IKE для уменьшения количества одновременных соединений.',
      likes: 9
    },
    {
      id: 2302,
      author: 'Михаил Р.',
      date: '2025-02-08T16:15:00',
      content: 'Проверьте также MTU на интерфейсе туннеля. На ISR 1100 часто требуется явно уменьшить MTU для корректной работы IPSec.',
      likes: 14
    },
    {
      id: 2303,
      author: 'Екатерина Н.',
      date: '2025-02-08T17:30:00',
      content: 'Убедитесь, что у вас настроен правильный NAT-Traversal. ISR 1100 требует явного включения NAT-T для работы через NAT: "crypto ipsec nat-transparency enable".',
      likes: 10
    }
  ]
},

// More security threads
{
  id: 24,
  categoryId: 'security',
  title: 'Cisco AMP for Endpoints - проблема с обновлением подписки',
  author: 'Виктор Е.',
  date: '2025-03-05T13:20:00',
  views: 198,
  replies: 5,
  content: `После обновления лицензий Cisco AMP for Endpoints, некоторые клиенты перестали получать обновления политик. В консоли управления они отображаются как неактивные, хотя агент на компьютерах работает. Что может быть причиной и как это исправить?`,
  tags: ['AMP', 'Endpoints', 'лицензия', 'обновление'],
  solved: false,
  likes: 13,
  comments: [
    {
      id: 2401,
      author: 'Светлана К.',
      date: '2025-03-05T14:00:00',
      content: 'Проверьте, правильно ли привязаны новые лицензии к вашему аккаунту в AMP. Иногда при обновлении лицензии они могут быть привязаны к неправильному аккаунту или организации.',
      likes: 8
    },
    {
      id: 2402,
      author: 'Андрей Л.',
      date: '2025-03-05T15:20:00',
      content: 'Проблема может быть в соединении клиентов с облаком AMP. Проверьте, что на клиентских машинах разрешен доступ к домену updates.amp.cisco.com на порту 443.',
      likes: 15
    },
    {
      id: 2403,
      author: 'Татьяна В.',
      date: '2025-03-05T16:45:00',
      content: 'В некоторых случаях требуется переустановка агента на клиентских машинах после обновления лицензии. Попробуйте переустановить агент с теми же настройками на одной из проблемных машин.',
      likes: 11
    }
  ]
},
{
  id: 25,
  categoryId: 'security',
  title: 'Cisco Umbrella - не работает интеграция с AD',
  author: 'Дмитрий Н.',
  date: '2025-02-19T10:30:00',
  views: 287,
  replies: 7,
  content: `Настроил интеграцию Cisco Umbrella с Active Directory через AD Connector, но пользователи не идентифицируются в логах. В консоли Umbrella коннектор показывает статус "Connected", но в поле Identity источник пользователя отображается как "None". Как решить эту проблему?`,
  tags: ['Umbrella', 'Active Directory', 'AD Connector', 'идентификация'],
  solved: true,
  likes: 18,
  comments: [
    {
      id: 2501,
      author: 'Сергей В.',
      date: '2025-02-19T11:15:00',
      content: 'Проверьте настройки Kerberos в AD Connector. Для корректной идентификации пользователей необходимо, чтобы компьютер, на котором установлен коннектор, был членом домена и имел доступ к LDAP.',
      likes: 14
    },
    {
      id: 2502,
      author: 'Анастасия Р.',
      date: '2025-02-19T12:40:00',
      content: 'Проблема может быть в маршрутизации DNS-запросов. Убедитесь, что все DNS-запросы от клиентских машин проходят через Umbrella, а не через локальные DNS-серверы напрямую.',
      likes: 12
    },
    {
      id: 2503,
      author: 'Евгений Д.',
      date: '2025-02-19T14:05:00',
      content: 'Проверьте также, что у пользователей установлен Umbrella Roaming Client или настроен Umbrella VA, и что они корректно интегрированы с локальной Active Directory.',
      likes: 16
    }
  ]
},

// More wireless threads
{
  id: 26,
  categoryId: 'wireless',
  title: 'Cisco 9800-CL - проблема с высокой загрузкой CPU',
  author: 'Антон М.',
  date: '2025-03-15T09:40:00',
  views: 312,
  replies: 6,
  content: `На виртуальном контроллере Cisco 9800-CL периодически наблюдается высокая загрузка CPU (более 90%), что приводит к проблемам с управлением точками доступа. В логах не видно явных ошибок или предупреждений. Виртуальная машина имеет 8 vCPU и 16GB RAM. Что может быть причиной?`,
  tags: ['9800-CL', 'CPU', 'виртуализация', 'производительность'],
  solved: true,
  likes: 15,
  comments: [
    {
      id: 2601,
      author: 'Михаил Ш.',
      date: '2025-03-15T10:20:00',
      content: 'Проверьте настройки SNMP на контроллере. Частые SNMP-запросы могут создавать высокую нагрузку на CPU. Рекомендуется ограничить доступ по SNMP только необходимыми системами мониторинга.',
      likes: 12
    },
    {
      id: 2602,
      author: 'Вера К.',
      date: '2025-03-15T11:40:00',
      content: 'На 9800-CL часто возникают проблемы с process "emweb". Проверьте загрузку CPU по процессам командой "show processes cpu sorted" и если emweb потребляет много ресурсов, попробуйте перезапустить его.',
      likes: 17
    },
    {
      id: 2603,
      author: 'Денис Г.',
      date: '2025-03-15T13:10:00',
      content: 'Проблема может быть в конфигурации гипервизора. Убедитесь, что настроены резервирование CPU и память для VM с 9800-CL, и что нет overselling ресурсов на хосте.',
      likes: 14
    }
  ]
},
{
  id: 27,
  categoryId: 'wireless',
  title: 'Wave 2 AP проблема совместимости с старыми клиентами',
  author: 'Елена Т.',
  date: '2025-02-23T14:15:00',
  views: 276,
  replies: 9,
  content: `После развертывания точек доступа Cisco Aironet 3800 (Wave 2), некоторые старые клиентские устройства (ноутбуки с Intel Centrino) имеют проблемы с подключением. Они либо не видят сеть, либо подключаются с очень низкой скоростью. Как обеспечить совместимость с старыми клиентами?`,
  tags: ['Aironet 3800', 'Wave 2', 'совместимость', 'старые клиенты'],
  solved: true,
  likes: 20,
  comments: [
    {
      id: 2701,
      author: 'Александр К.',
      date: '2025-02-23T14:55:00',
      content: 'Проблема может быть в настройках MU-MIMO и 802.11ac. Старые клиенты не поддерживают эти технологии. Попробуйте отключить 802.11ac и MU-MIMO для тестирования.',
      likes: 14
    },
    {
      id: 2702,
      author: 'Ирина О.',
      date: '2025-02-23T16:10:00',
      content: 'Проверьте также настройки совместимости с 802.11b. На новых точках доступа иногда отключена поддержка устаревших протоколов (legacy rates) для повышения производительности.',
      likes: 18
    },
    {
      id: 2703,
      author: 'Павел Д.',
      date: '2025-02-23T17:30:00',
      content: 'Старые клиенты с Intel Centrino часто имеют проблемы с аутентификацией WPA2 на новых точках. Попробуйте временно переключиться на WPA для тестирования или обновите драйверы на клиентских устройствах.',
      likes: 15
    }
  ]
},

// Add more aci threads
{
  id: 28,
  categoryId: 'aci',
  title: 'ACI и mirroring - проблема с ERSPAN',
  author: 'Алексей М.',
  date: '2025-03-08T16:20:00',
  views: 243,
  replies: 6,
  content: `Настроил ERSPAN в ACI для отправки зеркалированного трафика на внешний анализатор, но пакеты не доходят. Source и destination EPG настроены правильно, в логах на Spine нет ошибок. Анализатор доступен по ping из ACI. В чем может быть проблема?`,
  tags: ['ACI', 'ERSPAN', 'mirroring', 'анализ трафика'],
  solved: true,
  likes: 14,
  comments: [
    {
      id: 2801,
      author: 'Марина З.',
      date: '2025-03-08T17:00:00',
      content: 'Проверьте настройки фильтрации на ERSPAN сессии. В ACI по умолчанию применяются фильтры, которые могут ограничивать зеркалируемый трафик.',
      likes: 9
    },
    {
      id: 2802,
      author: 'Дмитрий С.',
      date: '2025-03-08T18:30:00',
      content: 'Убедитесь, что для ERSPAN настроен правильный L3Out и Exit Point. В ACI трафик зеркалирования должен выходить через конкретный L3Out.',
      likes: 12
    },
    {
      id: 2803,
      author: 'Иван К.',
      date: '2025-03-08T19:45:00',
      content: 'Проверьте MTU на пути от ACI до анализатора. ERSPAN добавляет дополнительные заголовки к пакетам, и если MTU недостаточен, пакеты могут отбрасываться.',
      likes: 16
    }
  ]
},
{
  id: 29,
  categoryId: 'aci',
  title: 'ACI - проблема с контрактами между EPG',
  author: 'Валентина К.',
  date: '2025-02-16T11:30:00',
  views: 287,
  replies: 8,
  content: `Настроил контракты между EPG в ACI, но трафик не проходит. В логах вижу сообщение "ACLQOS-SLOT-1-2-PERMIT-FLOWS". При этом EPG находятся в одном бридж домене и контракт разрешает весь трафик (any/any). Ping между конечными точками не проходит. Что может быть не так?`,
  tags: ['ACI', 'контракты', 'EPG', 'ACLQOS'],
  solved: true,
  likes: 17,
  comments: [
    {
      id: 2901,
      author: 'Роман С.',
      date: '2025-02-16T12:15:00',
      content: 'Проверьте, правильно ли настроено применение контрактов к EPG. Необходимо, чтобы одна EPG была настроена как consumer, а другая как provider для контракта.',
      likes: 13
    },
    {
      id: 2902,
      author: 'Ольга В.',
      date: '2025-02-16T13:40:00',
      content: 'В ACI также важно убедиться, что EPG правильно привязаны к портам, и что конечные устройства действительно входят в нужные EPG. Используйте команду "show endpoint ip" для проверки.',
      likes: 11
    },
    {
      id: 2903,
      author: 'Андрей П.',
      date: '2025-02-16T15:10:00',
      content: 'Сообщение "PERMIT-FLOWS" обычно означает, что контракт работает, и пакеты разрешены, но есть другая проблема. Проверьте маршрутизацию в Бридж Домене и настройки GARP/RARP.',
      likes: 15
    }
  ]
},

// Add some very technical ucs threads
{
  id: 30,
  categoryId: 'ucs',
  title: 'UCS B200 M6 проблема с NVIDIA T4 GPU',
  author: 'Григорий В.',
  date: '2025-03-19T10:20:00',
  views: 346,
  replies: 11,
  content: `После установки mezzanine карты с NVIDIA T4 GPU на сервер UCS B200 M6, GPU не определяется в VMware ESXi 7.0U2. В CIMC GPU видна корректно, но в ESXi команда "nvidia-smi" не находит устройства. BIOS настроен на режим "SR-IOV", VMDirectPath включен для PCIe устройств. Что может быть не так?`,
  tags: ['UCS', 'B200 M6', 'NVIDIA', 'GPU', 'ESXi'],
  solved: true,
  likes: 24,
  comments: [
    {
      id: 3001,
      author: 'Сергей М.',
      date: '2025-03-19T11:00:00',
      content: 'Проверьте, установлены ли в ESXi правильные драйверы NVIDIA. Для T4 в ESXi 7.0U2 требуется драйвер версии не ниже 460.32.04, который не включен в стандартную поставку ESXi.',
      likes: 18
    },
    {
      id: 3002,
      author: 'Анна Д.',
      date: '2025-03-19T12:30:00',
      content: 'В UCS на B200 M6 также требуется специальный VIC драйвер для поддержки GPU passthrough. Убедитесь, что у вас установлен fnic/enic версии не ниже 4.0.0.8.',
      likes: 15
    },
    {
      id: 3003,
      author: 'Павел К.',
      date: '2025-03-19T14:15:00',
      content: 'Проверьте также настройки MMIO в BIOS. Для NVIDIA T4 требуется установить "Above 4G Decoding" в значение Enabled и "SR-IOV Support" в Enabled.',
      likes: 21
    }
  ]
},

{
  id: 31,
  categoryId: 'security',
  title: 'Cisco Firepower - проблема с правилами SSL',
  author: 'Максим Г.',
  date: '2025-03-23T09:15:00',
  views: 312,
  replies: 9,
  content: `После обновления Firepower Management Center до версии 7.0.1, перестали работать правила SSL для расшифровки трафика. В логах вижу сообщение "SSL Flow Error" и "Unknown alert". Сертификаты на FMC установлены корректно. Что может быть причиной проблемы?`,
  tags: ['Firepower', 'SSL', 'FMC', 'расшифровка'],
  solved: false,
  likes: 17,
  comments: [
    {
      id: 3101,
      author: 'Илья В.',
      date: '2025-03-23T10:00:00',
      content: 'Проверьте настройки SSL Policy. В версии 7.0.1 изменился способ обработки SSL/TLS 1.3, и некоторые старые настройки могут не работать корректно.',
      likes: 13
    },
    {
      id: 3102,
      author: 'Наталья П.',
      date: '2025-03-23T11:20:00',
      content: 'Проблема может быть также в CA Certificate. Убедитесь, что цепочка сертификатов полная и все промежуточные сертификаты добавлены в FMC.',
      likes: 15
    },
    {
      id: 3103,
      author: 'Константин Р.',
      date: '2025-03-23T12:45:00',
      content: 'В FMC 7.0.1 также появились строгие проверки на алгоритмы в сертификатах. Убедитесь, что ваш CA использует SHA-256 или выше для подписи, а не устаревшие SHA-1 или MD5.',
      likes: 10
    }
  ]
},
{
  id: 32,
  categoryId: 'networking',
  title: 'Catalyst 9500 - проблема с EVPN VXLAN',
  author: 'Сергей Ж.',
  date: '2025-03-14T15:45:00',
  views: 287,
  replies: 7,
  content: `Настроил EVPN VXLAN на коммутаторах Catalyst 9500, но туннели не устанавливаются. BGP пиринг между коммутаторами работает, VTEP интерфейсы поднимаются, но в логах вижу ошибки "NVEDGE-4-VNI_VRF_MAPPING_FAIL" и NVE не передаёт трафик. Конфигурация соответствует документации Cisco. Что может быть не так?`,
  tags: ['Catalyst 9500', 'EVPN', 'VXLAN', 'BGP'],
  solved: true,
  likes: 22,
  comments: [
    {
      id: 3201,
      author: 'Анатолий С.',
      date: '2025-03-14T16:30:00',
      content: 'Ошибка "VNI_VRF_MAPPING_FAIL" обычно возникает, когда VNI не привязан к правильному VRF. Проверьте, что команда "vni <id>" присутствует в нужном VRF.',
      likes: 18
    },
    {
      id: 3202,
      author: 'Елена К.',
      date: '2025-03-14T17:50:00',
      content: 'Проверьте также конфигурацию BGP EVPN. На Catalyst 9500 требуется явное включение специальной address-family: "address-family l2vpn evpn" и настройка route-target import/export.',
      likes: 15
    },
    {
      id: 3203,
      author: 'Виктор М.',
      date: '2025-03-14T19:10:00',
      content: 'Проблема может быть также в MTU на интерфейсах. Для VXLAN требуется MTU не менее 1550 байт на всем пути между VTEP. Проверьте настройки MTU на всех интерфейсах в пути.',
      likes: 20
    }
  ]
},
{
  id: 33,
  categoryId: 'networking',
  title: 'Подключение Nexus к DNA Center',
  author: 'Ольга И.',
  date: '2025-03-10T08:30:00',
  views: 256,
  replies: 6,
  content: `При попытке добавить коммутаторы Nexus 9300 в DNA Center 2.3.3, возникает ошибка "Failed to add device". В логах на коммутаторах не вижу ошибок. SSH и SNMP доступ с DNA Center к коммутаторам работает, credentials указаны правильно. В чем может быть проблема?`,
  tags: ['Nexus', 'DNA Center', 'управление', 'интеграция'],
  solved: true,
  likes: 18,
  comments: [
    {
      id: 3301,
      author: 'Александр Т.',
      date: '2025-03-10T09:15:00',
      content: 'DNA Center 2.3.3 имеет известную проблему с добавлением Nexus коммутаторов, если на них настроен VRF. Убедитесь, что management интерфейс находится в default VRF.',
      likes: 14
    },
    {
      id: 3302,
      author: 'Михаил К.',
      date: '2025-03-10T10:40:00',
      content: 'Также проверьте версию NX-OS на коммутаторах. DNA Center 2.3.3 требует NX-OS 9.3(5) или выше для полной поддержки коммутаторов Nexus 9300.',
      likes: 12
    },
    {
      id: 3303,
      author: 'Татьяна Н.',
      date: '2025-03-10T11:55:00',
      content: 'Еще одна распространенная проблема - отсутствие лицензии NXAPI. Для интеграции с DNA Center требуется активированная лицензия NXAPI на коммутаторах Nexus.',
      likes: 16
    }
  ]
},
{
  id: 34,
  categoryId: 'wireless',
  title: 'Catalyst 9130AX - Проблема с EAP-TLS аутентификацией',
  author: 'Дмитрий Л.',
  date: '2025-03-05T13:50:00',
  views: 267,
  replies: 8,
  content: `После перехода на точки доступа Catalyst 9130AX с Aironet 3800, возникли проблемы с аутентификацией EAP-TLS для некоторых клиентов. В логах ISE вижу ошибку "The RADIUS server could not process the request". Клиенты не могут подключиться к Wi-Fi. Что может быть причиной?`,
  tags: ['Catalyst 9130AX', 'EAP-TLS', 'ISE', 'аутентификация'],
  solved: true,
  likes: 21,
  comments: [
    {
      id: 3401,
      author: 'Алексей П.',
      date: '2025-03-05T14:25:00',
      content: 'На Catalyst 9130AX по умолчанию включено шифрование Cisco Umbrella, которое может конфликтовать с EAP-TLS. Попробуйте отключить функцию Umbrella на WLC командой "no umbrella-policy mode".',
      likes: 16
    },
    {
      id: 3402,
      author: 'Ирина Т.',
      date: '2025-03-05T15:50:00',
      content: 'Проверьте также версию TLS, используемую в ISE. Catalyst 9130AX требует как минимум TLS 1.2, а старые версии ISE могут использовать TLS 1.0 или 1.1 по умолчанию.',
      likes: 13
    },
    {
      id: 3403,
      author: 'Валентин Р.',
      date: '2025-03-05T17:15:00',
      content: 'Убедитесь также, что в Policy Set на ISE настроены правильные условия для точек доступа Catalyst. Они могут отправлять другие RADIUS атрибуты по сравнению с Aironet.',
      likes: 19
    }
  ]
},
{
  id: 35,
  categoryId: 'security',
  title: 'Cisco FTD и AWS Transit Gateway',
  author: 'Артур М.',
  date: '2025-03-16T10:20:00',
  views: 289,
  replies: 7,
  content: `Пытаюсь настроить подключение между Cisco FTD 7.0 (физический) и AWS Transit Gateway через IPSec VPN. Туннель поднимается, но трафик не проходит. В логах FTD вижу успешное установление Phase 1 и Phase 2, но пакеты не decrypt/encrypt. Что может быть не так?`,
  tags: ['FTD', 'AWS', 'Transit Gateway', 'IPSec'],
  solved: false,
  likes: 19,
  comments: [
    {
      id: 3501,
      author: 'Илья С.',
      date: '2025-03-16T11:05:00',
      content: 'Проверьте настройки интересного трафика (access-list) на FTD. Для AWS Transit Gateway требуется явно указать все префиксы, которые должны передаваться через туннель.',
      likes: 15
    },
    {
      id: 3502,
      author: 'Марина В.',
      date: '2025-03-16T12:30:00',
      content: 'Проблема может быть в route-based VPN настройках. AWS Transit Gateway требует BGP для обмена маршрутами. Убедитесь, что на FTD настроен правильный BGP пиринг через туннель.',
      likes: 18
    },
    {
      id: 3503,
      author: 'Степан К.',
      date: '2025-03-16T14:10:00',
      content: 'Также проверьте policy-based NAT настройки на FTD. Для работы с AWS требуется, чтобы трафик, идущий в туннель, не подвергался NAT. Добавьте правило "NAT Exempt" для этого трафика.',
      likes: 14
    }
  ]
},
{
  id: 36,
  categoryId: 'aci',
  title: 'ACI и SDA интеграция - проблемы с маршрутизацией',
  author: 'Надежда К.',
  date: '2025-02-28T15:40:00',
  views: 312,
  replies: 9,
  content: `Настроил интеграцию между ACI и SDA с использованием VRF интеграции, но имею проблемы с маршрутизацией между фабриками. В логах вижу, что маршруты загружаются в BGP, но трафик не проходит. Traceroute показывает, что пакеты останавливаются на Border Node. Как исправить?`,
  tags: ['ACI', 'SDA', 'VRF', 'интеграция'],
  solved: true,
  likes: 24,
  comments: [
    {
      id: 3601,
      author: 'Геннадий В.',
      date: '2025-02-28T16:20:00',
      content: 'Проверьте настройки SGT на Border Node. При интеграции ACI и SDA важно, чтобы SGT теги корректно передавались между фабриками через SGT Exchange Protocol.',
      likes: 19
    },
    {
      id: 3602,
      author: 'Светлана М.',
      date: '2025-02-28T17:45:00',
      content: 'Проблема также может быть в контрактах на стороне ACI. Для трафика из SDA требуется настроить соответствующие контракты с учетом SGT тегов или настроить vzAny для упрощения.',
      likes: 16
    },
    {
      id: 3603,
      author: 'Евгений П.',
      date: '2025-02-28T19:10:00',
      content: 'Проверьте также route leaking между VRF на Fusion устройстве. Если используется multi-VRF дизайн, то требуется явная настройка route leaking между VRF для правильной маршрутизации.',
      likes: 21
    }
  ]
},
{
  id: 37,
  categoryId: 'ucs',
  title: 'UCS 6454 - проблема с FEX портами',
  author: 'Олег В.',
  date: '2025-03-20T09:30:00',
  views: 245,
  replies: 5,
  content: `После миграции с UCS 6248 на UCS 6454, возникли проблемы с портами FEX. Некоторые серверы C-Series не определяются в UCS Manager. В логах вижу ошибку "FSM failed: Discovery" и "Server Port Channel is not up". На серверах используются VIC 1340. Что может быть не так?`,
  tags: ['UCS', '6454', 'FEX', 'C-Series'],
  solved: true,
  likes: 17,
  comments: [
    {
      id: 3701,
      author: 'Василий Т.',
      date: '2025-03-20T10:15:00',
      content: 'Проверьте параметры портов на FEX. В UCS 6454 изменился способ настройки Server Ports для FEX. Требуется использовать команду "slot 1 port X port-role fcoe-nas-server" вместо прежней "port-role server".',
      likes: 12
    },
    {
      id: 3702,
      author: 'Анна М.',
      date: '2025-03-20T11:40:00',
      content: 'Также проверьте версию UCS Manager и CIMC на серверах C-Series. Для работы с UCS 6454 требуется UCSM 4.0 или выше и CIMC 4.0 или выше на серверах.',
      likes: 15
    },
    {
      id: 3703,
      author: 'Денис В.',
      date: '2025-03-20T13:05:00',
      content: 'VIC 1340 требует особой конфигурации в UCS 6454. Убедитесь, что на портах FEX настроен правильный Port-channel Policy с включенными опциями "lacp" и "suspend-individual".',
      likes: 14
    }
  ]
},
{
  id: 38,
  categoryId: 'networking',
  title: 'Nexus 9K - проблема с anycast шлюзом в VXLAN',
  author: 'Алексей У.',
  date: '2025-03-12T14:20:00',
  views: 278,
  replies: 7,
  content: `После настройки VXLAN anycast gateway на коммутаторах Nexus 9K, клиенты периодически теряют связь с шлюзом. ARP-записи в таблицах клиентов присутствуют, но ping до шлюза периодически пропадает. В логах коммутаторов ошибок нет. В чем может быть проблема?`,
  tags: ['Nexus', '9K', 'VXLAN', 'anycast', 'шлюз'],
  solved: true,
  likes: 23,
  comments: [
    {
      id: 3801,
      author: 'Игорь С.',
      date: '2025-03-12T15:00:00',
      content: 'Проверьте конфигурацию SVI на коммутаторах. Для anycast gateway требуется настройка "ip address virtual" вместо обычного "ip address".',
      likes: 18
    },
    {
      id: 3802,
      author: 'Тамара В.',
      date: '2025-03-12T16:25:00',
      content: 'Проблема может быть в настройках HSRP/VRRP, которые могут конфликтовать с anycast gateway. Убедитесь, что на SVI нет настроек HSRP/VRRP.',
      likes: 15
    },
    {
      id: 3803,
      author: 'Павел Н.',
      date: '2025-03-12T17:50:00',
      content: 'Также проверьте MTU для NVE интерфейса и физических uplink портов. Для VXLAN требуется MTU не менее 1600 байт, иначе возможны периодические потери пакетов.',
      likes: 21
    }
  ]
},
{
  id: 39,
  categoryId: 'security',
  title: 'ISE 3.1 и Cisco 9800 WLC интеграция',
  author: 'Виктория К.',
  date: '2025-03-18T11:10:00',
  views: 291,
  replies: 8,
  content: `После миграции с WLC 5520 на Catalyst 9800, аутентификация по certificates EAP-TLS перестала работать. ISE 3.1 показывает успешную аутентификацию, но авторизация не проходит. В логах ISE вижу сообщение "Authorization ruleset failed". В чем может быть проблема?`,
  tags: ['ISE', '3.1', 'Catalyst 9800', 'EAP-TLS'],
  solved: false,
  likes: 20,
  comments: [
    {
      id: 3901,
      author: 'Станислав Е.',
      date: '2025-03-18T11:55:00',
      content: 'Проверьте атрибуты, передаваемые от WLC 9800 в ISE. Catalyst 9800 использует другие VSA (Vendor Specific Attributes) по сравнению с WLC 5520, что требует изменения политик авторизации в ISE.',
      likes: 17
    },
    {
      id: 3902,
      author: 'Ольга П.',
      date: '2025-03-18T13:20:00',
      content: 'Проблема может быть в настройках AAA Override на WLAN. В Catalyst 9800 требуется явное включение опции "AAA Override" для передачи атрибутов авторизации от ISE.',
      likes: 14
    },
    {
      id: 3903,
      author: 'Дмитрий З.',
      date: '2025-03-18T14:45:00',
      content: 'Также убедитесь, что в ISE настроен правильный CoA Type для Catalyst 9800. В отличие от WLC 5520, Catalyst 9800 требует использования RFC CoA Type вместо Cisco CoA Type.',
      likes: 19
    }
  ]
},
{
  id: 40,
  categoryId: 'wireless',
  title: 'Cisco CW9166 - Проблема с AP Join в 6GHz',
  author: 'Игорь К.',
  date: '2025-03-04T09:45:00',
  views: 267,
  replies: 6,
  content: `После установки новых точек доступа Catalyst CW9166, они не могут присоединиться к контроллеру 9800 в режиме 6GHz. В режиме 2.4GHz и 5GHz все работает нормально. В логах контроллера вижу ошибку "AP Join failed: regulatory domain mismatch". Что может быть причиной?`,
  tags: ['CW9166', '6GHz', 'Wi-Fi 6E', 'AP Join'],
  solved: true,
  likes: 18,
  comments: [
    {
      id: 4001,
      author: 'Лариса С.',
      date: '2025-03-04T10:30:00',
      content: 'Проверьте настройки country code на WLC. Для работы в диапазоне 6GHz требуется, чтобы страна в списке поддерживала Wi-Fi 6E. Не все страны в настоящее время разрешают использование 6GHz.',
      likes: 15
    },
    {
      id: 4002,
      author: 'Владислав М.',
      date: '2025-03-04T11:55:00',
      content: 'Также проверьте версию ПО на WLC 9800. Для поддержки 6GHz на точках CW9166 требуется версия не ниже 17.5.',
      likes: 12
    },
    {
      id: 4003,
      author: 'Екатерина В.',
      date: '2025-03-04T13:20:00',
      content: 'Проблема может быть также в настройках RRM. Для 6GHz требуется отдельная конфигурация RRM. Проверьте, что включен режим "6ghz-radio" в настройках RRM на контроллере.',
      likes: 16
    }
  ]
},
{
  id: 41,
  categoryId: 'networking',
  title: 'Catalyst 9500 - проблема с QSFP-DD 400G',
  author: 'Роман Ч.',
  date: '2025-03-22T16:15:00',
  views: 289,
  replies: 7,
  content: `После установки QSFP-DD 400G трансиверов на Catalyst 9500-H, интерфейсы не поднимаются. В логах вижу сообщение "Interface status error: unknown transceiver". Версия IOS XE на коммутаторах 17.7.1. Что может быть причиной проблемы?`,
  tags: ['Catalyst 9500', 'QSFP-DD', '400G', 'трансивер'],
  solved: true,
  likes: 22,
  comments: [
    {
      id: 4101,
      author: 'Сергей В.',
      date: '2025-03-22T17:00:00',
      content: 'Проверьте, что трансиверы внесены в список совместимости с Catalyst 9500-H. Не все QSFP-DD модули поддерживаются, особенно от сторонних производителей.',
      likes: 18
    },
    {
      id: 4102,
      author: 'Ирина С.',
      date: '2025-03-22T18:25:00',
      content: 'На Catalyst 9500-H по умолчанию включена проверка подлинности трансиверов. Если используются не оригинальные модули Cisco, требуется отключить эту проверку командой "no service unsupported-transceiver".',
      likes: 16
    },
    {
      id: 4103,
      author: 'Андрей К.',
      date: '2025-03-22T19:50:00',
      content: 'Для работы 400G модулей также требуется правильная настройка breakout. Проверьте, настроен ли режим "hw-module port-group 1/0/1 mode quad" или аналогичный для ваших портов.',
      likes: 20
    }
  ]
},
{
  id: 42,
  categoryId: 'aci',
  title: 'ACI 5.2 Multi-Site - проблема с синхронизацией политик',
  author: 'Ольга Ш.',
  date: '2025-03-17T10:30:00',
  views: 276,
  replies: 8,
  content: `После обновления ACI Multi-Site Orchestrator до версии 3.2, политики перестали синхронизироваться с удаленными сайтами. В логах MSO вижу ошибку "Template deployment failed" без дополнительных деталей. Все APIC контроллеры доступны, версия APIC на всех сайтах 5.2(1). Что может быть причиной проблемы?`,
  tags: ['ACI', 'Multi-Site', 'MSO', 'синхронизация'],
  solved: true,
  likes: 19,
  comments: [
    {
      id: 4201,
      author: 'Вячеслав Д.',
      date: '2025-03-17T11:15:00',
      content: 'Проверьте настройки Infra L3Out на сайтах. В MSO 3.2 изменился способ настройки Inter-Site connectivity, и требуется обновление конфигурации Infra L3Out на всех сайтах.',
      likes: 14
    },
    {
      id: 4202,
      author: 'Наталья Р.',
      date: '2025-03-17T12:40:00',
      content: 'Проблема может быть также в сертификатах на API endpoints. MSO 3.2 требует обновления сертификатов для API коммуникации с APIC. Проверьте срок действия сертификатов на всех APIC.',
      likes: 16
    },
    {
      id: 4203,
      author: 'Константин М.',
      date: '2025-03-17T14:05:00',
      content: 'В версии MSO 3.2 также изменилась модель аутентификации для Inter-Site BGP. Проверьте настройки аутентификации для BGP соседей между сайтами.',
      likes: 13
    }
  ]
},
{
  id: 43,
  categoryId: 'ucs',
  title: 'UCS X-Series - проблема с Fabric Interconnect 4G',
  author: 'Дмитрий Г.',
  date: '2025-03-06T11:45:00',
  views: 312,
  replies: 9,
  content: `После подключения UCS X-Series шасси к Fabric Interconnect FI-64108, некоторые серверы не определяются в UCS Manager. В логах вижу ошибку "Inventory discovery error" и "Unable to reserve serial port". Что может быть причиной?`,
  tags: ['UCS', 'X-Series', 'FI-64108', 'discovery'],
  solved: false,
  likes: 21,
  comments: [
    {
      id: 4301,
      author: 'Алина В.',
      date: '2025-03-06T12:30:00',
      content: 'Проверьте версию прошивки на IOM модулях в шасси X-Series. Для работы с FI-64108 требуется версия прошивки не ниже 5.0(1a).',
      likes: 17
    },
    {
      id: 4302,
      author: 'Антон М.',
      date: '2025-03-06T13:55:00',
      content: 'Ошибка "Unable to reserve serial port" часто возникает из-за конфликта Serial over LAN (SoL) настроек. Попробуйте отключить SoL на проблемных серверах через CLI.',
      likes: 14
    },
    {
      id: 4303,
      author: 'Елена З.',
      date: '2025-03-06T15:20:00',
      content: 'Также проверьте настройки Server Port на FI. Для X-Series требуется особая последовательность настройки портов - сначала активировать порты для IOM, затем для серверов.',
      likes: 19
    }
  ]
},
{
  id: 44,
  categoryId: 'security',
  title: 'FTD и Microsoft Teams - проблема с SIP ALG',
  author: 'Виктор А.',
  date: '2025-03-09T14:40:00',
  views: 287,
  replies: 7,
  content: `После установки FTD 7.0 в качестве периметрального файрвола, пользователи испытывают проблемы с аудио и видео в Microsoft Teams. В логах FTD вижу множество сообщений "SIP: Media Negotiation Failure". Как решить эту проблему?`,
  tags: ['FTD', 'Microsoft Teams', 'SIP ALG', 'медиа'],
  solved: true,
  likes: 24,
  comments: [
    {
      id: 4401,
      author: 'Алексей К.',
      date: '2025-03-09T15:25:00',
      content: 'Проблема в SIP и H323 инспекции, которая включена по умолчанию в FTD. Microsoft Teams использует нестандартную сигнализацию, которая несовместима с SIP ALG. Отключите SIP и H323 инспекцию в политике инспекции.',
      likes: 19
    },
    {
      id: 4402,
      author: 'Ольга Е.',
      date: '2025-03-09T16:50:00',
      content: 'Также для Microsoft Teams требуются специальные правила доступа для диапазонов портов UDP 50000-59999, которые используются для передачи медиа. Убедитесь, что эти порты открыты в выходящем направлении.',
      likes: 16
    },
    {
      id: 4403,
      author: 'Николай Л.',
      date: '2025-03-09T18:15:00',
      content: 'В FTD 7.0 также полезно включить опцию "Preserve Flow State" для UDP трафика. Это позволит корректно обрабатывать UDP сессии для Teams без полной инспекции содержимого.',
      likes: 21
    }
  ]
},
{
  id: 45,
  categoryId: 'networking',
  title: 'ISR 4461 - Проблема с LISP маршрутизацией',
  author: 'Анна Д.',
  date: '2025-03-20T09:20:00',
  views: 298,
  replies: 8,
  content: `После настройки LISP на маршрутизаторах ISR 4461, маршруты не распространяются между сайтами. Map-Server и Map-Resolver настроены, регистрация EID проходит успешно, но в таблице маршрутизации удаленные префиксы не появляются. В логах вижу сообщение "LISP: Map-Reply no authoritative entries found". Что может быть не так?`,
  tags: ['ISR 4461', 'LISP', 'маршрутизация', 'Map-Server'],
  solved: true,
  likes: 22,
  comments: [
    {
      id: 4501,
      author: 'Сергей Н.',
      date: '2025-03-20T10:05:00',
      content: 'Проверьте настройки instance-id на всех маршрутизаторах. Для обмена маршрутами в LISP требуется одинаковый instance-id на всех участниках.',
      likes: 18
    },
    {
      id: 4502,
      author: 'Ирина К.',
      date: '2025-03-20T11:30:00',
      content: 'Ошибка "Map-Reply no authoritative entries" обычно указывает на проблемы с аутентификацией. Проверьте, что key-chain для LISP настроен идентично на всех устройствах.',
      likes: 15
    },
    {
      id: 4503,
      author: 'Павел В.',
      date: '2025-03-20T12:55:00',
      content: 'Также убедитесь, что в настройках LISP правильно указаны локальные EID префиксы с командой "database-mapping" и параметр "proxy-reply" включен на Map-Server.',
      likes: 20
    }
  ]
},
{
  id: 46,
  categoryId: 'wireless',
  title: 'Catalyst 9136 - Проблема с Wi-Fi 7 клиентами',
  author: 'Алексей Е.',
  date: '2025-03-15T14:30:00',
  views: 323,
  replies: 10,
  content: `После установки новых точек доступа Catalyst 9136, клиенты с поддержкой Wi-Fi 7 подключаются только в режиме 802.11ax, а не 802.11be. В логах контроллера вижу сообщение "Client capability mismatch". Прошивка на контроллере 9800 последняя - 18.1.1. Что может быть причиной?`,
  tags: ['Catalyst 9136', 'Wi-Fi 7', '802.11be', 'клиенты'],
  solved: false,
  likes: 26,
  comments: [
    {
      id: 4601,
      author: 'Дмитрий Т.',
      date: '2025-03-15T15:10:00',
      content: 'Проверьте настройки Radio Policy на WLAN. Для поддержки Wi-Fi 7 требуется явное включение 802.11be в политике радио. По умолчанию может быть активен только 802.11ax.',
      likes: 21
    },
    {
      id: 4602,
      author: 'Светлана М.',
      date: '2025-03-15T16:35:00',
      content: 'Также убедитесь, что включена функция MLD (Multi-Link Device). Wi-Fi 7 требует поддержки MLD для полной функциональности, иначе клиенты будут подключаться в режиме совместимости 802.11ax.',
      likes: 18
    },
    {
      id: 4603,
      author: 'Виктор Н.',
      date: '2025-03-15T18:00:00',
      content: 'Проблема также может быть в настройках каналов. Для Wi-Fi 7 требуется явная настройка 320 MHz каналов. Проверьте, что в RRM настройках разрешены каналы с шириной 320 MHz.',
      likes: 24
    }
  ]
},
{
  id: 47,
  categoryId: 'security',
  title: 'Firepower и Microsoft Exchange Server 2022',
  author: 'Наталья Ю.',
  date: '2025-02-25T10:15:00',
  views: 298,
  replies: 7,
  content: `После установки Firepower перед Microsoft Exchange Server 2022, возникли проблемы с доступом к почте. Некоторые пользователи не могут подключиться через Outlook, веб-интерфейс работает нормально. В логах FTD вижу блокировку по правилу "HTTP Large Header". Что может быть причиной?`,
  tags: ['Firepower', 'Exchange', '2022', 'HTTP'],
  solved: true,
  likes: 19,
  comments: [
    {
      id: 4701,
      author: 'Владимир К.',
      date: '2025-02-25T10:55:00',
      content: 'Exchange 2022 использует очень большие HTTP заголовки для аутентификации Outlook клиентов. По умолчанию Firepower блокирует такие заголовки как потенциальные атаки. Увеличьте максимальный размер HTTP заголовка в политике инспекции до 32KB.',
      likes: 16
    },
    {
      id: 4702,
      author: 'Евгения Р.',
      date: '2025-02-25T12:20:00',
      content: 'Также проверьте настройки TCP Inspection. Exchange 2022 использует длительные TCP сессии, которые могут быть завершены по таймауту. Увеличьте timeout для TCP сессий.',
      likes: 13
    },
    {
      id: 4703,
      author: 'Станислав М.',
      date: '2025-02-25T13:45:00',
      content: 'Рекомендую также отключить TLS Decryption для трафика Exchange. В Exchange 2022 используются новые шифры, которые могут некорректно обрабатываться Firepower при расшифровке.',
      likes: 17
    }
  ]
},
{
  id: 48,
  categoryId: 'networking',
  title: 'Catalyst 9600 - проблема с Policy-Based Routing',
  author: 'Михаил Т.',
  date: '2025-03-11T13:25:00',
  views: 267,
  replies: 6,
  content: `После настройки Policy-Based Routing на Catalyst 9600, маршрутизация работает некорректно. Трафик не перенаправляется согласно policy-map. В логах вижу сообщение "Policy-Based Routing: route-map evaluation failed". Что может быть причиной?`,
  tags: ['Catalyst 9600', 'PBR', 'Policy-Based Routing', 'route-map'],
  solved: true,
  likes: 18,
  comments: [
    {
      id: 4801,
      author: 'Анна В.',
      date: '2025-03-11T14:10:00',
      content: 'На Catalyst 9600 для работы PBR требуется включить CEF на интерфейсе. Проверьте, что CEF активен: "show ip cef interface X verify".',
      likes: 15
    },
    {
      id: 4802,
      author: 'Сергей К.',
      date: '2025-03-11T15:35:00',
      content: 'Ошибка "route-map evaluation failed" часто возникает, если next-hop в route-map недоступен. Убедитесь, что next-hop IP доступен через прямое подключение или есть маршрут к нему.',
      likes: 12
    },
    {
      id: 4803,
      author: 'Ольга Г.',
      date: '2025-03-11T17:00:00',
      content: 'Также проверьте, что трафик соответствует ACL в route-map. На Catalyst 9600 трафик, генерируемый самим устройством, не обрабатывается PBR, только транзитный.',
      likes: 16
    }
  ]
},
{
  id: 49,
  categoryId: 'aci',
  title: 'ACI и VMware NSX-T интеграция',
  author: 'Илья С.',
  date: '2025-03-13T09:10:00',
  views: 312,
  replies: 9,
  content: `Пытаюсь настроить интеграцию между ACI и VMware NSX-T 4.0 с использованием logical switching. Конфигурация в ACI и NSX-T выполнена согласно документации, но виртуальные машины не видят друг друга. В логах ACI вижу сообщение "COOP-5-RECV_NO_COOP", а в NSX-T "Edge transport node disconnected". Как решить эту проблему?`,
  tags: ['ACI', 'NSX-T', 'VMware', 'интеграция'],
  solved: false,
  likes: 23,
  comments: [
    {
      id: 4901,
      author: 'Максим Л.',
      date: '2025-03-13T09:55:00',
      content: 'Проверьте настройки BGP соседства между ACI Spine и NSX-T Edge. Для интеграции ACI и NSX-T 4.0 требуется настройка eBGP с multi-hop, так как чаще всего они не подключены напрямую.',
      likes: 19
    },
    {
      id: 4902,
      author: 'Татьяна С.',
      date: '2025-03-13T11:20:00',
      content: 'Ошибка "COOP-5-RECV_NO_COOP" указывает на проблемы с VXLAN туннелями. Убедитесь, что MTU на всем пути между ACI и NSX-T не менее 1600 байт.',
      likes: 16
    },
    {
      id: 4903,
      author: 'Андрей Р.',
      date: '2025-03-13T12:45:00',
      content: 'Также проверьте настройки контрактов в ACI. Для интеграции с NSX-T 4.0 требуется настройка vzAny с разрешенными протоколами BGP (TCP/179) и VXLAN (UDP/4789).',
      likes: 21
    }
  ]
},
{
  id: 50,
  categoryId: 'ucs',
  title: 'UCS Manager и LDAP/Active Directory интеграция',
  author: 'Елена К.',
  date: '2025-03-18T15:40:00',
  views: 256,
  replies: 6,
  content: `После настройки интеграции UCS Manager с Active Directory через LDAP, пользователи не могут аутентифицироваться. В логах вижу ошибку "Authentication failed: LDAP bind error". Тестовое подключение к LDAP серверу из UCS Manager успешно. В чем может быть проблема?`,
  tags: ['UCS', 'LDAP', 'Active Directory', 'аутентификация'],
  solved: true,
  likes: 17,
  comments: [
    {
      id: 5001,
      author: 'Денис О.',
      date: '2025-03-18T16:25:00',
      content: 'Проверьте настройки Base DN и Filter в UCS Manager. Для правильной аутентификации пользователей требуется корректный Base DN, указывающий на контейнер с пользователями.',
      likes: 14
    },
    {
      id: 5002,
      author: 'Валерия М.',
      date: '2025-03-18T17:50:00',
      content: 'Также проверьте настройки Role Mappings в LDAP группах. Каждой группе AD должна быть назначена соответствующая роль в UCS Manager, иначе аутентификация не будет работать.',
      likes: 11
    },
    {
      id: 5003,
      author: 'Артем В.',
      date: '2025-03-18T19:15:00',
      content: 'Проблема также может быть в SSL/TLS настройках. Если в AD требуется LDAPS, убедитесь, что в UCS Manager включен SSL и импортирован корректный сертификат.',
      likes: 15
    }
  ]
},
{
  id: 51,
  categoryId: 'wireless',
  title: 'Cisco DNA Center и Wi-Fi 6E развертывание',
  author: 'Вера Н.',
  date: '2025-03-06T08:50:00',
  views: 298,
  replies: 8,
  content: `При настройке Wi-Fi 6E сети через DNA Center 2.3.5, точки доступа 9130AXI корректно добавляются, но WLAN в диапазоне 6 GHz не создается. В логах DNA Center вижу ошибку "RF Profile deployment failed". Что может быть причиной?`,
  tags: ['DNA Center', 'Wi-Fi 6E', '6 GHz', 'RF Profile'],
  solved: true,
  likes: 21,
  comments: [
    {
      id: 5101,
      author: 'Алексей Ш.',
      date: '2025-03-06T09:35:00',
      content: 'В DNA Center 2.3.5 требуется явно включить поддержку 6 GHz в RRM шаблоне. По умолчанию включены только 2.4 GHz и 5 GHz. Создайте новый шаблон RF Profile с включенной опцией "Enable 6 GHz band".',
      likes: 18
    },
    {
      id: 5102,
      author: 'Ирина К.',
      date: '2025-03-06T11:00:00',
      content: 'Проверьте также регуляторные настройки. Для работы Wi-Fi 6E требуется, чтобы в настройках страны был указан регион, где разрешено использование 6 GHz.',
      likes: 15
    },
    {
      id: 5103,
      author: 'Павел С.',
      date: '2025-03-06T12:25:00',
      content: 'Убедитесь также, что на точках доступа 9130AXI установлена совместимая версия прошивки. Для поддержки Wi-Fi 6E через DNA Center требуется версия AP Software не ниже 17.8.',
      likes: 19
    }
  ]
},
{
  id: 52,
  categoryId: 'networking',
  title: 'Nexus 93180YC-FX - проблема с VXLAN EVPN',
  author: 'Антон Д.',
  date: '2025-02-19T14:30:00',
  views: 285,
  replies: 7,
  content: `После настройки VXLAN EVPN на коммутаторах Nexus 93180YC-FX, маршрутизация между VLAN не работает. VXLAN туннели устанавливаются, BGP пиринг между Leaf коммутаторами работает, но трафик между разными VLAN не маршрутизируется. В логах вижу сообщение "Hardware programming failed". Что может быть причиной?`,
  tags: ['Nexus', '93180YC-FX', 'VXLAN', 'EVPN'],
  solved: true,
  likes: 24,
  comments: [
    {
      id: 5201,
      author: 'Дмитрий Н.',
      date: '2025-02-19T15:15:00',
      content: 'Проверьте настройки TCAM на коммутаторах. Для VXLAN EVPN требуется специальная настройка TCAM профиля: "hardware access-list tcam region vacl 0; hardware access-list tcam region redirect 256".',
      likes: 19
    },
    {
      id: 5202,
      author: 'Светлана Т.',
      date: '2025-02-19T16:40:00',
      content: 'Ошибка "Hardware programming failed" часто возникает при недостатке ресурсов в ASIC. Проверьте использование ресурсов командой "show hardware capacity".',
      likes: 16
    },
    {
      id: 5203,
      author: 'Игорь М.',
      date: '2025-02-19T18:05:00',
      content: 'Также убедитесь, что для всех VLAN настроен VRF и правильный L3 VNI. Для маршрутизации между VLAN требуется L3 VNI с включенной опцией "advertise virtual-rmac".',
      likes: 22
    }
  ]
},
{
  id: 53,
  categoryId: 'security',
  title: 'ISE 3.2 - проблема с TACACS+ для сетевых устройств',
  author: 'Борис В.',
  date: '2025-03-25T09:20:00',
  views: 267,
  replies: 6,
  content: `После обновления Cisco ISE до версии 3.2, перестала работать аутентификация по TACACS+ для сетевых устройств. В логах ISE вижу сообщение "TACACS authentication failed: Request timed out". Что может быть причиной?`,
  tags: ['ISE', 'TACACS+', 'аутентификация', 'сетевые устройства'],
  solved: false,
  likes: 19,
  comments: [
    {
      id: 5301,
      author: 'Мария Р.',
      date: '2025-03-25T10:05:00',
      content: 'В ISE 3.2 изменился способ обработки TACACS+ запросов. Проверьте, что в настройках TACACS+ Server включен параметр "Legacy TACACS+ Protocol Support".',
      likes: 16
    },
    {
      id: 5302,
      author: 'Николай С.',
      date: '2025-03-25T11:30:00',
      content: 'Проблема может быть также в фильтрации трафика между ISE и сетевыми устройствами. В ISE 3.2 по умолчанию используется другой порт для TACACS+. Проверьте, что порт 10024/TCP разрешен на межсетевых экранах.',
      likes: 13
    },
    {
      id: 5303,
      author: 'Виктория Е.',
      date: '2025-03-25T12:55:00',
      content: 'Ошибка "Request timed out" также может указывать на проблемы с маршрутизацией между ISE и сетевыми устройствами. Проверьте, что все устройства имеют корректные записи в Network Device Groups в ISE.',
      likes: 17
    }
  ]
},
{
  id: 54,
  categoryId: 'aci',
  title: 'ACI - проблема с VMM интеграцией с VMware 8.0',
  author: 'Олег З.',
  date: '2025-03-16T16:15:00',
  views: 287,
  replies: 7,
  content: `После обновления VMware vCenter до версии 8.0, интеграция с ACI через VMM домен перестала работать. В логах ACI вижу ошибку "VMM-5-CONNECT_FAILED" и "Certificate validation failed". Версия ACI - 6.0(1). Как решить эту проблему?`,
  tags: ['ACI', 'VMM', 'VMware', 'vCenter 8.0'],
  solved: true,
  likes: 22,
  comments: [
    {
      id: 5401,
      author: 'Алексей Ф.',
      date: '2025-03-16T17:00:00',
      content: 'В VMware vCenter 8.0 изменились требования к сертификатам. Для работы с ACI требуется обновить сертификаты на ACI, создав новые с алгоритмом SHA-256 и ключом RSA 2048 бит.',
      likes: 18
    },
    {
      id: 5402,
      author: 'Тамара К.',
      date: '2025-03-16T18:25:00',
      content: 'Ошибка "Certificate validation failed" также может возникать из-за изменений в API vCenter 8.0. Попробуйте пересоздать VMM домен с новыми учетными данными.',
      likes: 15
    },
    {
      id: 5403,
      author: 'Вадим П.',
      date: '2025-03-16T19:50:00',
      content: 'В ACI 6.0(1) есть известная проблема с VMware vCenter 8.0. Рекомендуется обновить ACI до версии 6.0(2) или выше, где эта проблема исправлена.',
      likes: 20
    }
  ]
},
{
  id: 55,
  categoryId: 'ucs',
  title: 'UCS и VMware ESXi 8.0 - проблема с сетевыми адаптерами',
  author: 'Евгений Т.',
  date: '2025-03-09T11:45:00',
  views: 302,
  replies: 8,
  content: `После установки VMware ESXi 8.0 на серверы UCS B200 M6, сетевые адаптеры VIC 1440 не определяются корректно. В логах ESXi вижу сообщение "Device not supported by current driver". Драйверы fnic и eNIC установлены. Что может быть причиной?`,
  tags: ['UCS', 'ESXi 8.0', 'VIC 1440', 'драйверы'],
  solved: true,
  likes: 23,
  comments: [
    {
      id: 5501,
      author: 'Ольга Н.',
      date: '2025-03-09T12:30:00',
      content: 'В ESXi 8.0 изменилась архитектура драйверов. Для VIC 1440 требуется драйвер версии не ниже 1.6.0.8, который не включен в стандартную поставку ESXi 8.0. Установите последний драйвер с сайта Cisco.',
      likes: 19
    },
    {
      id: 5502,
      author: 'Сергей Д.',
      date: '2025-03-09T13:55:00',
      content: 'Проблема также может быть в настройках PCIe на UCS. В BIOS Policy в разделе PCIe должна быть включена опция "ARI Support" для корректной работы с ESXi 8.0.',
      likes: 16
    },
    {
      id: 5503,
      author: 'Алина В.',
      date: '2025-03-09T15:20:00',
      content: 'В некоторых случаях также требуется обновить прошивку на VIC 1440. Минимальная версия прошивки для работы с ESXi 8.0 - 5.2(3b).',
      likes: 21
    }
  ]
},
{
  id: 56,
  categoryId: 'networking',
  title: 'SD-WAN - проблема с Cloud OnRamp для SaaS',
  author: 'Татьяна М.',
  date: '2025-03-22T10:35:00',
  views: 278,
  replies: 7,
  content: `После настройки Cisco SD-WAN Cloud OnRamp для SaaS, оптимизация для Microsoft 365 не работает. В vManage не отображаются метрики качества для Office 365, хотя для других SaaS приложений метрики есть. В логах вижу сообщение "SaaS probing failed: no response from endpoint". Что может быть причиной?`,
  tags: ['SD-WAN', 'Cloud OnRamp', 'SaaS', 'Microsoft 365'],
  solved: true,
  likes: 20,
  comments: [
    {
      id: 5601,
      author: 'Алексей Т.',
      date: '2025-03-22T11:20:00',
      content: 'Проверьте настройки DNS на edge-маршрутизаторах. Для работы с Microsoft 365 требуется, чтобы DNS-серверы могли разрешать доменные имена Microsoft в публичные IP.',
      likes: 17
    },
    {
      id: 5602,
      author: 'Наталья Г.',
      date: '2025-03-22T12:45:00',
      content: 'Ошибка "SaaS probing failed" часто возникает из-за блокировки ICMP трафика. Убедитесь, что в исходящем направлении разрешен ICMP трафик к URL-адресам Microsoft.',
      likes: 14
    },
    {
      id: 5603,
      author: 'Виктор Е.',
      date: '2025-03-22T14:10:00',
      content: 'Также проверьте, что в настройках Cloud OnRamp указаны правильные URL-адреса для Microsoft 365. В последних версиях Microsoft изменил некоторые endpoint URL.',
      likes: 19
    }
  ]
},
{
  id: 57,
  categoryId: 'wireless',
  title: 'Проблема локализации клиентов в Cisco DNA Spaces',
  author: 'Марина З.',
  date: '2025-03-14T15:25:00',
  views: 245,
  replies: 6,
  content: `После интеграции WLC 9800 с Cisco DNA Spaces, система некорректно локализует клиентов. Позиция определяется с большой погрешностью, хотя количество AP достаточное. В логах DNA Spaces вижу предупреждение "Insufficient RSSI data for accurate positioning". Как можно улучшить точность?`,
  tags: ['DNA Spaces', 'локализация', 'WLC 9800', 'RSSI'],
  solved: false,
  likes: 18,
  comments: [
    {
      id: 5701,
      author: 'Дмитрий В.',
      date: '2025-03-14T16:10:00',
      content: 'Для точной локализации в DNA Spaces требуется калибровка RSSI. Запустите процесс калибровки через "Tools > Location Calibration" в DNA Spaces. Это значительно повышает точность.',
      likes: 15
    },
    {
      id: 5702,
      author: 'Светлана Ю.',
      date: '2025-03-14T17:35:00',
      content: 'Проверьте также настройки Hyperlocation на WLC 9800. Для точной локализации рекомендуется включить функцию FastLocate и HALO на точках доступа.',
      likes: 12
    },
    {
      id: 5703,
      author: 'Константин П.',
      date: '2025-03-14T19:00:00',
      content: 'Важно также правильно указать физические размеры и карту помещения в DNA Spaces. Точность локализации сильно зависит от корректности масштаба и расположения AP на карте.',
      likes: 16
    }
  ]
},
{
  id: 58,
  categoryId: 'security',
  title: 'Cisco Umbrella SIG - проблема с File Preview',
  author: 'Андрей К.',
  date: '2025-03-01T09:55:00',
  views: 267,
  replies: 6,
  content: `После включения функции File Preview в Cisco Umbrella SIG, пользователи сообщают о проблемах при скачивании некоторых типов файлов, особенно PDF. В логах Umbrella вижу сообщение "File preview scan timeout". Что может быть причиной и как это исправить?`,
  tags: ['Umbrella', 'SIG', 'File Preview', 'PDF'],
  solved: true,
  likes: 19,
  comments: [
    {
      id: 5801,
      author: 'Сергей Л.',
      date: '2025-03-01T10:40:00',
      content: 'Проблема с таймаутами File Preview часто возникает для больших файлов. По умолчанию установлен лимит в 10MB. Увеличьте максимальный размер файла для сканирования в настройках File Preview.',
      likes: 16
    },
    {
      id: 5802,
      author: 'Ирина Б.',
      date: '2025-03-01T12:05:00',
      content: 'Также проверьте настройки категорий файлов. Некоторые типы PDF (особенно с JavaScript) могут требовать дополнительного времени для сканирования. Добавьте исключения для доверенных источников PDF.',
      likes: 13
    },
    {
      id: 5803,
      author: 'Николай Ж.',
      date: '2025-03-01T13:30:00',
      content: 'В последних версиях Umbrella SIG добавлена функция AMP File Reputation. Если она активирована вместе с File Preview, это может создавать дополнительную нагрузку и вызывать таймауты. Попробуйте отключить одну из функций для тестирования.',
      likes: 17
    }
  ]
},
{
  id: 59,
  categoryId: 'aci',
  title: 'ACI и VMware NSX-V на одной инфраструктуре',
  author: 'Валентин К.',
  date: '2025-03-23T14:15:00',
  views: 289,
  replies: 8,
 content: `Пытаемся настроить сосуществование ACI и NSX-V на одной физической инфраструктуре для поэтапной миграции. На фабрике ACI настроен Opflex integration domain, но возникают проблемы с передачей VLAN на ESXi хосты с NSX-V. В логах вижу ошибку "EPG VLAN provisioning failed". Как корректно настроить эту интеграцию?`,
  tags: ['ACI', 'NSX-V', 'миграция', 'Opflex'],
  solved: true,
  likes: 21,
  comments: [
    {
      id: 5901,
      author: 'Дмитрий Е.',
      date: '2025-03-23T15:00:00',
      content: 'Для сосуществования ACI и NSX-V рекомендуется использовать не Opflex, а статические VLAN binding. Создайте отдельный VLAN pool для NSX-V с режимом Static Allocation.',
      likes: 17
    },
    {
      id: 5902,
      author: 'Анастасия Р.',
      date: '2025-03-23T16:25:00',
      content: 'Также требуется создать специальный VMM домен с provider "VMware" и отключенной опцией "OpFlex". В этом домене настройте статические привязки EPG к VLAN.',
      likes: 14
    },
    {
      id: 5903,
      author: 'Владислав К.',
      date: '2025-03-23T17:50:00',
      content: 'Ошибка "EPG VLAN provisioning failed" часто возникает из-за конфликта VLAN ID. Убедитесь, что VLAN ID, используемые для NSX-V, не пересекаются с динамическими VLAN в других VMM доменах.',
      likes: 19
    }
  ]
},
{
  id: 60,
  categoryId: 'networking',
  title: 'Catalyst 9500 - проблема с load-balancing SDM шаблоном',
  author: 'Инна Л.',
  date: '2025-03-08T13:10:00',
  views: 267,
  replies: 6,
  content: `После обновления IOS XE на Catalyst 9500 до версии 17.9.1, возникла проблема с распределением трафика в port-channel. В логах вижу сообщение "FED-2-FEATURE_INSTALL_FAILED: R0/0: fed: ". Port-channel работает, но весь трафик идет только через один физический интерфейс. Что может быть причиной?`,
  tags: ['Catalyst 9500', 'load-balancing', 'SDM', 'port-channel'],
  solved: true,
  likes: 18,
  comments: [
    {
      id: 6001,
      author: 'Виктор П.',
      date: '2025-03-08T13:55:00',
      content: 'В IOS XE 17.9.1 изменилась структура SDM шаблонов. Для корректной работы load-balancing в port-channel требуется применить команду "sdm prefer default" и перезагрузить коммутатор.',
      likes: 15
    },
    {
      id: 6002,
      author: 'Ольга С.',
      date: '2025-03-08T15:20:00',
      content: 'Также проверьте настройки EtherChannel load-balancing. В версии 17.9.1 рекомендуется использовать расширенный алгоритм: "port-channel load-balance extended src-dst-ip".',
      likes: 12
    },
    {
      id: 6003,
      author: 'Артем Н.',
      date: '2025-03-08T16:45:00',
      content: 'Ошибка "FEATURE_INSTALL_FAILED" также может указывать на проблемы с лицензированием. Проверьте, что на коммутаторе активирована лицензия Network Advantage, которая требуется для расширенных функций port-channel.',
      likes: 16
    }
  ]
},
{
  id: 61,
  categoryId: 'security',
  title: 'FTD и IPS правила - высокая загрузка CPU',
  author: 'Кирилл М.',
  date: '2025-03-03T11:15:00',
  views: 298,
  replies: 8,
  content: `После активации политики IPS на FTD 4110, наблюдается высокая загрузка CPU (более 80%). В логах много сообщений "Snort Instance X CPU Utilization is high". При отключении политики IPS загрузка возвращается в норму. Как оптимизировать работу IPS без отключения защиты?`,
  tags: ['FTD', 'IPS', 'CPU', 'Snort'],
  solved: true,
  likes: 23,
  comments: [
    {
      id: 6101,
      author: 'Александр О.',
      date: '2025-03-03T12:00:00',
      content: 'Проверьте настройки инспекции трафика. Для снижения нагрузки рекомендуется использовать переменные сети в IPS политике, чтобы ограничить инспекцию только необходимыми подсетями.',
      likes: 19
    },
    {
      id: 6102,
      author: 'Елена Д.',
      date: '2025-03-03T13:25:00',
      content: 'Также рекомендуется настроить фильтрацию правил IPS. Используйте подход с базовыми категориями (например, "Balanced Security and Connectivity") и отключите правила с низким приоритетом.',
      likes: 16
    },
    {
      id: 6103,
      author: 'Михаил Т.',
      date: '2025-03-03T14:50:00',
      content: 'Проверьте настройки Snort в пользовательской сети. В FTD 4110 можно увеличить количество экземпляров Snort для параллельной обработки трафика. Используйте команду "show snort instance resource usage" для проверки текущей конфигурации.',
      likes: 21
    }
  ]
},
{
  id: 62,
  categoryId: 'ucs',
  title: 'UCS Central и UCS Manager синхронизация политик',
  author: 'Валерия С.',
  date: '2025-03-19T10:05:00',
  views: 245,
  replies: 6,
  content: `После регистрации UCS домена в UCS Central, локальные политики не синхронизируются. В логах UCS Central вижу ошибку "Policy resolution failed: insufficient rights". Глобальные политики применяются корректно, но локальные не импортируются. Как решить эту проблему?`,
  tags: ['UCS Central', 'UCS Manager', 'политики', 'синхронизация'],
  solved: false,
  likes: 17,
  comments: [
    {
      id: 6201,
      author: 'Дмитрий Л.',
      date: '2025-03-19T10:50:00',
      content: 'Проверьте настройки Policy Resolution Control в UCS Central. Для импорта локальных политик требуется явно указать категории политик, которые нужно импортировать.',
      likes: 14
    },
    {
      id: 6202,
      author: 'Олег П.',
      date: '2025-03-19T12:15:00',
      content: 'Также проверьте роль пользователя, который использовался для регистрации UCS домена в Central. Для полной синхронизации политик требуется роль не ниже "admin".',
      likes: 11
    },
    {
      id: 6203,
      author: 'Татьяна К.',
      date: '2025-03-19T13:40:00',
      content: 'Проблема может быть также в конфликтах имен политик. Если в UCS Central уже существуют политики с такими же именами, как в UCS Manager, импорт не будет выполнен. Попробуйте изменить режим разрешения конфликтов в настройках UCS Central.',
      likes: 15
    }
  ]
},
{
  id: 63,
  categoryId: 'wireless',
  title: 'WLC 9800 и mDNS прокси - проблема с Apple AirPlay',
  author: 'Алиса Г.',
  date: '2025-03-12T15:30:00',
  views: 289,
  replies: 7,
  content: `После настройки mDNS прокси на WLC 9800, устройства Apple не могут обнаруживать AirPlay на разных подсетях. В логах вижу сообщение "mDNS service query dropped". При этом другие mDNS сервисы (например, Chromecast) работают нормально. Что может быть причиной?`,
  tags: ['WLC 9800', 'mDNS', 'Apple', 'AirPlay'],
  solved: true,
  likes: 20,
  comments: [
    {
      id: 6301,
      author: 'Станислав Ф.',
      date: '2025-03-12T16:15:00',
      content: 'Проверьте настройки mDNS service-policy. Для Apple AirPlay требуется явно добавить сервис "airplay" в список разрешенных сервисов. По умолчанию он может быть не включен.',
      likes: 17
    },
    {
      id: 6302,
      author: 'Вера М.',
      date: '2025-03-12T17:40:00',
      content: 'Также Apple AirPlay использует несколько mDNS сервисов одновременно. Помимо "airplay" требуется добавить "raop" и "airplay-source" в список разрешенных сервисов.',
      likes: 14
    },
    {
      id: 6303,
      author: 'Григорий П.',
      date: '2025-03-12T19:05:00',
      content: 'Проблема может быть также в настройках Location Specific Services. В WLC 9800 требуется настроить расположение (location) для каждой подсети, где требуется работа mDNS.',
      likes: 19
    }
  ]
},
{
  id: 64,
  categoryId: 'aci',
  title: 'ACI и Terraform - проблема с применением конфигурации',
  author: 'Никита Р.',
  date: '2025-03-07T09:25:00',
  views: 267,
  replies: 6,
  content: `При использовании Terraform для автоматизации конфигурации ACI, возникают проблемы с применением изменений. Terraform-apply выполняется с ошибкой "Error creating object: API Error". При этом те же изменения через GUI проходят успешно. Версия Terraform - 1.5.0, провайдер aci версии 2.6.0. Что может быть причиной?`,
  tags: ['ACI', 'Terraform', 'автоматизация', 'API'],
  solved: true,
  likes: 18,
  comments: [
    {
      id: 6401,
      author: 'Сергей З.',
      date: '2025-03-07T10:10:00',
      content: 'Проверьте уровень доступа пользователя, от имени которого работает Terraform. Для полной автоматизации конфигурации требуется роль "admin", роль "read-write" может не иметь прав на создание некоторых объектов.',
      likes: 15
    },
    {
      id: 6402,
      author: 'Мария Е.',
      date: '2025-03-07T11:35:00',
      content: 'Ошибка "API Error" часто возникает из-за проблем с зависимостями в Terraform. Убедитесь, что объекты создаются в правильном порядке, используя depends_on в ресурсах Terraform.',
      likes: 12
    },
    {
      id: 6403,
      author: 'Дмитрий Н.',
      date: '2025-03-07T13:00:00',
      content: 'Провайдер aci версии 2.6.0 имеет известную проблему с созданием некоторых объектов на ACI 6.0+. Обновите провайдер до версии 2.6.1 или выше, где эта проблема исправлена.',
      likes: 16
    }
  ]
},
{
  id: 65,
  categoryId: 'networking',
  title: 'IOS XE - проблема с BGP Add-Path на ISR 4451',
  author: 'Владимир П.',
  date: '2025-03-17T14:35:00',
  views: 278,
  replies: 7,
  content: `После настройки BGP Add-Path на маршрутизаторах ISR 4451, дополнительные пути не анонсируются. В логах вижу сообщение "Additional Paths not advertised: no available paths match selection criteria". Версия IOS XE - 17.3.3. Как исправить эту проблему?`,
  tags: ['ISR 4451', 'BGP', 'Add-Path', 'маршрутизация'],
  solved: true,
  likes: 21,
  comments: [
    {
      id: 6501,
      author: 'Алексей Т.',
      date: '2025-03-17T15:20:00',
      content: 'Проверьте настройки route-map для выбора дополнительных путей. В IOS XE для работы Add-Path требуется явно указать дополнительные пути с помощью route-map и команды "set path-selection all advertise".',
      likes: 18
    },
    {
      id: 6502,
      author: 'Светлана К.',
      date: '2025-03-17T16:45:00',
      content: 'Также убедитесь, что на обоих маршрутизаторах в BGP конфигурации включена отправка и прием дополнительных путей: "neighbor x.x.x.x additional-paths send receive".',
      likes: 15
    },
    {
      id: 6503,
      author: 'Иван С.',
      date: '2025-03-17T18:10:00',
      content: 'В IOS XE 17.3.3 также требуется включить Add-Path на уровне address-family: "bgp additional-paths select all" и "bgp additional-paths install". Без этих команд дополнительные пути не будут анонсироваться.',
      likes: 20
    }
  ]
},
{
  id: 66,
  categoryId: 'security',
  title: 'Stealthwatch и Secure Network Analytics - проблема с Flow Collectors',
  author: 'Наталья Ш.',
  date: '2025-03-21T09:45:00',
  views: 256,
  replies: 6,
  content: `После обновления Cisco Secure Network Analytics (бывший Stealthwatch) до версии 7.4.1, Flow Collector перестал принимать NetFlow от некоторых маршрутизаторов. В логах вижу сообщение "NetFlow cache full, dropping flows". Настройки не менялись. Что может быть причиной?`,
  tags: ['Stealthwatch', 'Secure Network Analytics', 'NetFlow', 'Flow Collector'],
  solved: false,
  likes: 19,
  comments: [
    {
      id: 6601,
      author: 'Александр Е.',
      date: '2025-03-21T10:30:00',
      content: 'В версии 7.4.1 изменились требования к размеру кэша NetFlow. Проверьте настройки Flow Collector в разделе "Configuration > Advanced Settings" и увеличьте параметр "Maximum cache size" до рекомендуемого значения.',
      likes: 16
    },
    {
      id: 6602,
      author: 'Ольга Н.',
      date: '2025-03-21T11:55:00',
      content: 'Проблема также может быть в формате NetFlow от маршрутизаторов. В версии 7.4.1 по умолчанию отключена поддержка устаревших форматов NetFlow (v5). Проверьте, какую версию NetFlow используют ваши маршрутизаторы.',
      likes: 13
    },
    {
      id: 6603,
      author: 'Вадим М.',
      date: '2025-03-21T13:20:00',
      content: 'В новой версии также добавлена функция Rate Limiting для входящих потоков. Проверьте настройки "Rate Limiting" в разделе "Configuration > Advanced Settings > Collection" и увеличьте лимит, если он слишком низкий.',
      likes: 17
    }
  ]
},
{
  id: 67,
  categoryId: 'ucs',
  title: 'UCS Manager - проблема с Fibre Channel Zoning',
  author: 'Павел Д.',
  date: '2025-03-05T15:15:00',
  views: 234,
  replies: 5,
  content: `После обновления UCS Manager до версии 4.2, перестала работать FC Zoning. В логах вижу ошибку "Zoning commit failed: not a VSAN capable device". Настройка FC Switching Mode установлена в "Switch", FC Zoning на VPC правильно настроен. Что может быть причиной?`,
  tags: ['UCS Manager', 'Fibre Channel', 'Zoning', 'VSAN'],
  solved: true,
  likes: 16,
  comments: [
    {
      id: 6701,
      author: 'Антон Б.',
      date: '2025-03-05T16:00:00',
      content: 'Проверьте настройки VSAN на Fabric Interconnect. В версии 4.2 изменился способ настройки FC Zoning, требуется явно указать fc-uplink порты в нужном VSAN.',
      likes: 13
    },
    {
      id: 6702,
      author: 'Ирина В.',
      date: '2025-03-05T17:25:00',
      content: 'Ошибка "not a VSAN capable device" часто возникает из-за неправильной настройки FC режима на аплинках. Убедитесь, что режим портов установлен в "FC Uplink", а не "FC Storage".',
      likes: 10
    },
    {
      id: 6703,
      author: 'Сергей Т.',
      date: '2025-03-05T18:50:00',
      content: 'В UCS Manager 4.2 также добавилась функция FC Zoning Policies. Попробуйте создать новую политику FC Zoning и применить ее к VSAN, вместо прямой настройки зонирования.',
      likes: 14
    }
  ]
},
{
  id: 68,
  categoryId: 'wireless',
  title: 'DNA Center и Prime Infrastructure миграция',
  author: 'Елена О.',
  date: '2025-03-10T11:55:00',
  views: 287,
  replies: 7,
  content: `Пытаемся мигрировать с Cisco Prime Infrastructure 3.9 на DNA Center 2.3.5. При использовании Migrate Tool возникает ошибка "Migration failed: cannot import wireless settings". Беспроводная сеть состоит из WLC 5520 и WLC 9800. Как решить эту проблему?`,
  tags: ['DNA Center', 'Prime Infrastructure', 'миграция', 'WLC'],
  solved: true,
  likes: 22,
  comments: [
    {
      id: 6801,
      author: 'Дмитрий И.',
      date: '2025-03-10T12:40:00',
      content: 'Проблема может быть в смешанной инфраструктуре WLC. Migrate Tool поддерживает либо только AireOS (WLC 5520), либо только IOS-XE (WLC 9800) при одной миграции. Попробуйте выполнить миграцию в два этапа, сначала для WLC 5520, затем для 9800.',
      likes: 18
    },
    {
      id: 6802,
      author: 'Наталья К.',
      date: '2025-03-10T14:05:00',
      content: 'Также проверьте версию WLC 5520. Для миграции на DNA Center 2.3.5 требуется версия не ниже 8.10 на AireOS контроллерах.',
      likes: 15
    },
    {
      id: 6803,
      author: 'Виктор Г.',
      date: '2025-03-10T15:30:00',
      content: 'В DNA Center 2.3.5 есть известная проблема с импортом шаблонов RF Profile из Prime Infrastructure. Перед миграцией экспортируйте RF Profiles отдельно и импортируйте их вручную после основной миграции.',
      likes: 20
    }
  ]
},
{
  id: 69,
  categoryId: 'aci',
  title: 'ACI - проблема со Switch Upgrade на Mini ACI',
  author: 'Тимур К.',
  date: '2025-03-24T16:05:00',
  views: 245,
  replies: 6,
  content: `При попытке обновить прошивку на Mini ACI (2 Leaf и 1 Spine), возникает ошибка "Node in use by other jobs, cannot upgrade". Все контроллеры APIC обновлены успешно, проблема только с коммутаторами. Что может быть причиной?`,
  tags: ['ACI', 'Mini ACI', 'Switch Upgrade', 'прошивка'],
  solved: true,
  likes: 17,
  comments: [
    {
      id: 6901,
      author: 'Алексей Р.',
      date: '2025-03-24T16:50:00',
      content: 'Проверьте, нет ли запущенных задач диагностики или сбора логов. В Mini ACI нельзя выполнять несколько операций техобслуживания одновременно. Используйте команду "show firmware jobs" для проверки активных задач.',
      likes: 14
    },
    {
      id: 6902,
      author: 'Светлана Д.',
      date: '2025-03-24T18:15:00',
      content: 'Ошибка "Node in use by other jobs" часто возникает, если предыдущая задача обновления была прервана. Попробуйте перезагрузить APIC контроллер и повторить попытку обновления.',
      likes: 11
    },
    {
      id: 6903,
      author: 'Константин Ж.',
      date: '2025-03-24T19:40:00',
      content: 'В Mini ACI также рекомендуется обновлять коммутаторы по одному, а не группой. Создайте отдельную задачу обновления для каждого коммутатора с интервалом не менее 30 минут между обновлениями.',
      likes: 15
    }
  ]
},
{
  id: 70,
  categoryId: 'networking',
  title: 'Catalyst 9300 - проблема с Conditional Debugging',
  author: 'Игорь Ф.',
  date: '2025-03-16T08:25:00',
  views: 234,
  replies: 5,
  content: `При попытке настроить Conditional Debugging на коммутаторе Catalyst 9300, возникает ошибка "Conditional Debugging not supported on this platform". Версия IOS XE - 17.6.1. Согласно документации, эта функция должна поддерживаться с версии 16.9. В чем может быть проблема?`,
  tags: ['Catalyst 9300', 'Conditional Debugging', 'IOS XE', 'отладка'],
  solved: false,
  likes: 15,
  comments: [
    {
      id: 7001,
      author: 'Марина Д.',
      date: '2025-03-16T09:10:00',
      content: 'Проверьте модель Catalyst 9300. Conditional Debugging поддерживается не на всех моделях серии 9300. На некоторых упрощенных моделях (например, C9300L) эта функция не доступна.',
      likes: 12
    },
    {
      id: 7002,
      author: 'Виктор С.',
      date: '2025-03-16T10:35:00',
      content: 'Также проверьте лицензию на коммутаторе. Для работы Conditional Debugging требуется лицензия Network Advantage, с лицензией Network Essentials эта функция недоступна.',
      likes: 9
    },
    {
      id: 7003,
      author: 'Анастасия Т.',
      date: '2025-03-16T12:00:00',
      content: 'В версии 17.6.1 есть известная проблема с Conditional Debugging на некоторых ревизиях железа. Попробуйте обновиться до версии 17.6.3 или выше, где эта проблема исправлена.',
      likes: 13
    }
  ]
}


  ]
};

export default function Community() {
  const [viewMode, setViewMode] = useState('categories'); // categories, threads, thread
  const [activeCategory, setActiveCategory] = useState(null);
  const [activeThread, setActiveThread] = useState(null);
  const [searchQuery, setSearchQuery] = useState('');
  const [forumData, setForumData] = useState(INITIAL_FORUM_DATA);
  const [newComment, setNewComment] = useState('');
  const [newThread, setNewThread] = useState({ title: '', content: '', tags: '' });
  const [showNewThreadModal, setShowNewThreadModal] = useState(false);

  // Format date to relative time (e.g. "2 hours ago")
  const formatDate = (dateString) => {
    try {
      const date = new Date(dateString);
      return formatDistanceToNow(date, { addSuffix: true, locale: ru });
    } catch (error) {
      return dateString;
    }
  };

  // Handle category selection
  const handleCategoryClick = (categoryId) => {
    setActiveCategory(categoryId);
    setViewMode('threads');
  };

  // Handle thread selection
  const handleThreadClick = (threadId) => {
    const thread = forumData.threads.find(t => t.id === threadId);
    setActiveThread(thread);
    setViewMode('thread');
  };

  // Handle back button
  const handleBack = () => {
    if (viewMode === 'thread') {
      setViewMode('threads');
      setActiveThread(null);
    } else if (viewMode === 'threads') {
      setViewMode('categories');
      setActiveCategory(null);
    }
  };

  // Handle search
  const handleSearch = (e) => {
    e.preventDefault();
    // Implement search functionality here
    console.log('Searching for:', searchQuery);
  };

  // Handle like/dislike thread
  const handleLikeThread = (threadId) => {
    setForumData(prevData => {
      const updatedThreads = prevData.threads.map(thread => {
        if (thread.id === threadId) {
          return { ...thread, likes: thread.likes + 1 };
        }
        return thread;
      });
      return { ...prevData, threads: updatedThreads };
    });
  };

  // Handle like/dislike comment
  const handleLikeComment = (threadId, commentId) => {
    setForumData(prevData => {
      const updatedThreads = prevData.threads.map(thread => {
        if (thread.id === threadId) {
          const updatedComments = thread.comments.map(comment => {
            if (comment.id === commentId) {
              return { ...comment, likes: comment.likes + 1 };
            }
            return comment;
          });
          return { ...thread, comments: updatedComments };
        }
        return thread;
      });
      return { ...prevData, threads: updatedThreads };
    });
  };

  // Handle new comment submission
  const handleCommentSubmit = (e) => {
    e.preventDefault();
    if (!newComment.trim()) return;

    const newCommentObj = {
      id: Date.now(),
      author: 'Вы',
      date: new Date().toISOString(),
      content: newComment,
      likes: 0
    };

    setForumData(prevData => {
      const updatedThreads = prevData.threads.map(thread => {
        if (thread.id === activeThread.id) {
          return {
            ...thread,
            comments: [...thread.comments, newCommentObj],
            replies: thread.replies + 1
          };
        }
        return thread;
      });
      return { ...prevData, threads: updatedThreads };
    });

    setActiveThread(prev => ({
      ...prev,
      comments: [...prev.comments, newCommentObj],
      replies: prev.replies + 1
    }));
    
    setNewComment('');
  };

  // Handle new thread form change
  const handleNewThreadChange = (e) => {
    const { name, value } = e.target;
    setNewThread(prev => ({ ...prev, [name]: value }));
  };

  // Handle new thread submission
  const handleNewThreadSubmit = (e) => {
    e.preventDefault();
    if (!newThread.title.trim() || !newThread.content.trim()) return;

    const tagsArray = newThread.tags.split(',').map(tag => tag.trim()).filter(tag => tag);

    const newThreadObj = {
      id: Date.now(),
      categoryId: activeCategory,
      title: newThread.title,
      author: 'Вы',
      date: new Date().toISOString(),
      views: 0,
      replies: 0,
      content: newThread.content,
      tags: tagsArray,
      solved: false,
      likes: 0,
      comments: []
    };

    setForumData(prevData => ({
      ...prevData,
      threads: [newThreadObj, ...prevData.threads]
    }));

    // Reset form and close modal
    setNewThread({ title: '', content: '', tags: '' });
    setShowNewThreadModal(false);
    
    // Navigate to the new thread
    setActiveThread(newThreadObj);
    setViewMode('thread');
  };

  // Get filtered threads based on active category
  const filteredThreads = activeCategory
    ? forumData.threads.filter(thread => thread.categoryId === activeCategory)
    : forumData.threads;

  return (
    <div className="bg-white min-h-screen">
      {/* Community Header */}
      <div className="bg-gray-100 border-b border-gray-200 p-4">
        <div className="max-w-6xl mx-auto">
          <div className="flex flex-col md:flex-row justify-between items-center gap-4">
            <h1 className="text-2xl font-bold text-gray-800">Сообщество Техподдержки</h1>
            
            <form onSubmit={handleSearch} className="w-full md:w-auto">
              <div className="flex">
                <input
                  type="text"
                  value={searchQuery}
                  onChange={(e) => setSearchQuery(e.target.value)}
                  placeholder="Поиск по форуму..."
                  className="px-4 py-2 border border-gray-300 rounded-l focus:outline-none focus:ring-1 focus:ring-gray-500 w-full md:w-64"
                />
                <button type="submit" className="bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 px-4 rounded-r">
                  Поиск
                </button>
              </div>
            </form>
          </div>
          
          {/* Breadcrumbs */}
          <div className="flex items-center text-sm mt-4">
            <button
              onClick={() => {
                setViewMode('categories');
                setActiveCategory(null);
                setActiveThread(null);
              }}
              className="text-gray-600 hover:text-gray-800"
            >
              Форум
            </button>
            
            {activeCategory && (
              <>
                <span className="mx-2 text-gray-400">/</span>
                <button
                  onClick={() => {
                    setViewMode('threads');
                    setActiveThread(null);
                  }}
                  className="text-gray-600 hover:text-gray-800"
                >
                  {forumData.categories.find(c => c.id === activeCategory)?.name}
                </button>
              </>
            )}
            
            {activeThread && (
              <>
                <span className="mx-2 text-gray-400">/</span>
                <span className="text-gray-800 truncate max-w-xs">{activeThread.title}</span>
              </>
            )}
          </div>
        </div>
      </div>
      
      {/* Main Content */}
      <div className="max-w-6xl mx-auto p-4">
        {/* Show back button if not on categories view */}
        {viewMode !== 'categories' && (
          <button
            onClick={handleBack}
            className="mb-4 inline-flex items-center text-gray-600 hover:text-gray-800"
          >
            <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
              <path fillRule="evenodd" d="M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z" clipRule="evenodd" />
            </svg>
            Назад
          </button>
        )}
        
        {/* Categories View */}
        {viewMode === 'categories' && (
          <div className="space-y-4">
            <h2 className="text-xl font-semibold text-gray-800 mb-4">Категории</h2>
            
            <div className="overflow-hidden bg-white shadow sm:rounded-md">
              <ul className="divide-y divide-gray-200">
                {forumData.categories.map(category => (
                  <li key={category.id} className="block hover:bg-gray-50">
                    <button
                      onClick={() => handleCategoryClick(category.id)}
                      className="px-4 py-4 sm:px-6 w-full text-left"
                    >
                      <div className="flex items-center justify-between">
                        <div className="truncate">
                          <div className="flex">
                            <p className="truncate text-lg font-medium text-gray-800">{category.name}</p>
                          </div>
                          <p className="mt-1 text-sm text-gray-600">{category.description}</p>
                        </div>
                        <div className="flex flex-col items-end text-sm text-gray-500">
                          <p>{category.topics} тем</p>
                          <p>{category.posts} сообщений</p>
                        </div>
                      </div>
                    </button>
                  </li>
                ))}
              </ul>
            </div>
          </div>
        )}
        
        {/* Threads View */}
        {viewMode === 'threads' && (
          <div className="space-y-4">
            <div className="flex justify-between items-center mb-4">
              <h2 className="text-xl font-semibold text-gray-800">
                {forumData.categories.find(c => c.id === activeCategory)?.name}
              </h2>
              <button
                onClick={() => setShowNewThreadModal(true)}
                className="bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 px-4 rounded inline-flex items-center"
              >
                <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
                  <path fillRule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clipRule="evenodd" />
                </svg>
                Новая тема
              </button>
            </div>
            
            {filteredThreads.length === 0 ? (
              <div className="text-center p-8 bg-gray-50 rounded">
                <p className="text-gray-600">Нет тем в этой категории</p>
              </div>
            ) : (
              <div className="overflow-hidden bg-white shadow sm:rounded-md">
                <ul className="divide-y divide-gray-200">
                  {filteredThreads.map(thread => (
                    <li key={thread.id} className="block hover:bg-gray-50">
                      <button
                        onClick={() => handleThreadClick(thread.id)}
                        className="px-4 py-4 sm:px-6 w-full text-left"
                      >
                        <div className="flex items-center justify-between">
                          <div className="truncate max-w-lg">
                            <div className="flex items-center">
                              <p className="truncate text-lg font-medium text-gray-800">{thread.title}</p>
                              {thread.solved && (
                                <span className="ml-2 px-2 py-0.5 text-xs font-medium bg-green-100 text-green-800 rounded">
                                  Решено
                                </span>
                              )}
                            </div>
                            <p className="mt-1 text-sm text-gray-600 truncate">{thread.content}</p>
                            <div className="mt-2 flex flex-wrap gap-1">
                              {thread.tags.map((tag, i) => (
                                <span key={i} className="px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-800 rounded">
                                  {tag}
                                </span>
                              ))}
                            </div>
                          </div>
                          <div className="flex flex-col items-end text-sm text-gray-500">
                            <p className="mb-1">{thread.author}</p>
                            <p className="mb-1">{formatDate(thread.date)}</p>
                            <div className="flex items-center mt-1">
                              <span className="mr-4">👁️ {thread.views}</span>
                              <span className="mr-4">💬 {thread.replies}</span>
                              <span>👍 {thread.likes}</span>
                            </div>
                          </div>
                        </div>
                      </button>
                    </li>
                  ))}
                </ul>
              </div>
            )}
          </div>
        )}
        
        {/* Thread Detail View */}
        {viewMode === 'thread' && activeThread && (
          <div className="space-y-6">
            {/* Thread header */}
            <div className="bg-white p-4 rounded shadow-sm">
              <div className="flex justify-between items-start">
                <div>
                  <h2 className="text-xl font-semibold text-gray-800">{activeThread.title}</h2>
                  <div className="flex items-center text-sm text-gray-500 mt-1">
                    <span className="mr-4">{activeThread.author}</span>
                    <span>{formatDate(activeThread.date)}</span>
                  </div>
                </div>
                <div className="flex items-center">
                  <button
                    onClick={() => handleLikeThread(activeThread.id)}
                    className="inline-flex items-center text-gray-500 hover:text-gray-700"
                  >
                    <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5" />
                    </svg>
                    {activeThread.likes}
                  </button>
                </div>
              </div>
              
              <div className="mt-4 prose max-w-none text-gray-700">
                <p>{activeThread.content}</p>
              </div>
              
              <div className="mt-4 flex flex-wrap gap-1">
                {activeThread.tags.map((tag, i) => (
                  <span key={i} className="px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-800 rounded">
                    {tag}
                  </span>
                ))}
              </div>
            </div>
            
            {/* Thread comments */}
            <div className="space-y-4">
              <h3 className="text-lg font-medium text-gray-800">Ответы ({activeThread.comments.length})</h3>
              
              {activeThread.comments.length === 0 ? (
                <div className="text-center p-8 bg-gray-50 rounded">
                  <p className="text-gray-600">Нет ответов. Будьте первым!</p>
                </div>
              ) : (
                <div className="space-y-4">
                  {activeThread.comments.map(comment => (
                    <div key={comment.id} className="bg-white p-4 rounded shadow-sm">
                      <div className="flex justify-between items-start">
                        <div className="flex items-center text-sm text-gray-500">
                          <span className="font-medium mr-4">{comment.author}</span>
                          <span>{formatDate(comment.date)}</span>
                        </div>
                        <button
                          onClick={() => handleLikeComment(activeThread.id, comment.id)}
                          className="inline-flex items-center text-gray-500 hover:text-gray-700"
                        >
                          <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5" />
                          </svg>
                          {comment.likes}
                        </button>
                      </div>
                      <div className="mt-2 prose max-w-none text-gray-700">
                        <p>{comment.content}</p>
                      </div>
                    </div>
                  ))}
                </div>
              )}
              
              {/* New comment form */}
              <div className="mt-6">
                <h4 className="text-md font-medium text-gray-800 mb-2">Добавить ответ</h4>
                <form onSubmit={handleCommentSubmit}>
                  <textarea
                    value={newComment}
                    onChange={(e) => setNewComment(e.target.value)}
                    placeholder="Введите ваш ответ..."
                    className="w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-gray-500"
                    rows="4"
                  ></textarea>
                  <div className="mt-2 flex justify-end">
                    <button
                      type="submit"
                      disabled={!newComment.trim()}
                      className={`bg-gray-200 py-2 px-4 rounded ${
                        newComment.trim() ? 'hover:bg-gray-300 text-gray-800' : 'opacity-50 cursor-not-allowed text-gray-500'
                      }`}
                    >
                      Отправить
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        )}
        
        {/* New Thread Modal */}
        {showNewThreadModal && (
          <div className="fixed inset-0 z-10 overflow-y-auto">
            <div className="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
              {/* Background overlay */}
              <div
                className="fixed inset-0 transition-opacity"
                aria-hidden="true"
                onClick={() => setShowNewThreadModal(false)}
              >
                <div className="absolute inset-0 bg-gray-500 opacity-75"></div>
              </div>
              
              {/* Modal */}
              <span className="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
              <div
                className="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"
                role="dialog"
                aria-modal="true"
                aria-labelledby="modal-headline"
              >
                <form onSubmit={handleNewThreadSubmit}>
                  <div className="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <div className="mb-4">
                      <label htmlFor="title" className="block text-sm font-medium text-gray-700">
                        Заголовок
                      </label>
                      <input
                        type="text"
                        name="title"
                        id="title"
                        value={newThread.title}
                        onChange={handleNewThreadChange}
                        className="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-500"
                        placeholder="Введите заголовок темы"
                      />
                    </div>
                    <div className="mb-4">
                      <label htmlFor="content" className="block text-sm font-medium text-gray-700">
                        Сообщение
                      </label>
                      <textarea
                        id="content"
                        name="content"
                        rows="4"
                        value={newThread.content}
                        onChange={handleNewThreadChange}
                        className="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-500"
                        placeholder="Опишите вашу проблему или вопрос"
                      ></textarea>
                    </div>
                    <div>
                      <label htmlFor="tags" className="block text-sm font-medium text-gray-700">
                        Теги (через запятую)
                      </label>
                      <input
                        type="text"
                        name="tags"
                        id="tags"
                        value={newThread.tags}
                        onChange={handleNewThreadChange}
                        className="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-500"
                        placeholder="например: cisco, маршрутизатор, настройка"
                      />
                    </div>
                  </div>
                  <div className="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button
                      type="submit"
                      className="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-gray-200 text-base font-medium text-gray-800 hover:bg-gray-300 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm"
                    >
                      Создать
                    </button>
                    <button
                      type="button"
                      onClick={() => setShowNewThreadModal(false)}
                      className="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"
                    >
                      Отмена
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        )}
      </div>
    </div>
  );
}
